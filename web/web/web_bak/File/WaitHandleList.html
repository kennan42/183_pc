<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta charset="utf-8" />
        <!-- bootstrap & fontawesome -->
        <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../assets/css/font-awesome.min.css" />
        <link rel="stylesheet" href="../assets/css/jquery-ui.custom.min.css" />
        <link rel="stylesheet" href="../assets/css/chosen.css" />
        <link rel="stylesheet" href="../assets/css/datepicker.css"/>
        <link rel="stylesheet" href="../assets/css/bootstrap-timepicker.css" />
        <link rel="stylesheet" href="../assets/css/daterangepicker.css" />
        <link rel="stylesheet" href="../assets/css/bootstrap-datetimepicker.css"/>
        <link rel="stylesheet" href="../assets/css/colorpicker.css" />
        <link rel="stylesheet" href="../assets/css/jquery.gritter.css" /> 
        <!-- text fonts -->
        <link rel="stylesheet" href="../assets/css/ace-fonts.css" />
        <!-- ace styles -->
        <link rel="stylesheet" href="../assets/css/ace.min.css" />
        <!--[if lte IE 9]>
            <link rel="stylesheet" href="./assets/css/ace-part2.min.css" />
        <![endif]-->
        <link rel="stylesheet" href="../assets/css/ace-skins.min.css" />
        <link rel="stylesheet" href="../assets/css/ace-rtl.min.css" />
        <!--[if lte IE 9]>
            <link rel="stylesheet" href="../assets/css/ace-ie.min.css" />
        <![endif]-->
        <!-- inline styles related to this page -->
        <!-- ace settings handler -->
        <script src="../assets/js/ace-extra.min.js"></script>
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media
        queries -->
        <!--[if lte IE 8]>
            <script src="../assets/js/html5shiv.js">
            </script>
            <script src="../assets/js/respond.min.js">
            </script>
        <![endif]-->
        <title>
            档案系统-存档待处理
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type="text/css">
            .btn-info:active, .btn-info:hover, .open .btn-info.dropdown-toggle{
                background-color:#1567c5!important;
                border-color:#2e82ff;
            }
            .btn-info, .btn-info:focus {
                background-color:#2e82ff!important;
                border-color:#2e82ff;
            }
            .nav-tabs>li{margin-right:4px;margin-bottom:-2px;}
            .nav-tabs>li.active{margin-bottom:-1px;}
            .tab-content.profile-edit-tab-content{border:1px solid #7ea8fb;border-width:1px 0 0 0;-webkit-box-shadow:none;box-shadow:none;}
            .nav-tabs>li>a{padding: 14px 34px 14px 26px;font-size:16px;overflow:hidden;}
            .nav-tabs>li>a>.ace-icon{float:left;margin-right:6px;}
            .nav-tabs>li>a>span{float:left;margin-top:1px;}
            .nav-tabs{border-color:#7ea8fb;border-bottom: 1px solid #7ea8fb;}
            .nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover{
                color:#1777e5;
                border-color:#7ea8fb #7ea8fb transparent;
                border-top:2px solid #1777e5;  
            }
            .nav-tabs>li>a, .nav-tabs>li>a:focus{
                color:#1777e5;
                border-color:#7ea8fb;
                background-color: #fff;
            }
            .nav-tabs>li>a:hover{border-color:#7ea8fb;color:#1777e5;}

            .tab-content.profile-edit-tab-content{padding:8px 0;padding-bottom:0px;}
            .table-bordered{border:none;}
            .table-bordered>thead>tr{border-top: 1px solid #ddd;}
            .table-bordered>thead>tr,.table-bordered>tbody>tr{border:1px solid #ddd;border-width:0 1px;}
            .table-bordered>thead>tr.TrInterval,.table-bordered>tbody>tr.TrInterval{border:none;}
            .table-striped>tbody>tr:nth-child(odd)>td, .table-striped>tbody>tr:nth-child(odd)>th{background-color:#fff;}
            .table-bordered>tbody>tr.TrInterval>td,.table-bordered>thead>tr.TrInterval>th{border:none;padding:0;height:4px;background:#fff;}
            .table-hover>tbody>tr:hover>td, .table-hover>tbody>tr:hover>th{background-color:#e1e4fa;}
            .table-hover>tbody>tr:hover>td.TrInterval, .table-hover>tbody>tr:hover>th.TrInterval{background-color:#fff;}
            .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th{
                cursor:pointer;
            }
            .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th, .table-bordered>thead>tr>td, .table-bordered>thead>tr>th{
                border-width:1px 0;
            }
            .table>thead>tr{background-image:none;background-color:#1777e5;color:#fff;}
            .table>thead>tr>th{font-weight:normal;}
            .table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th{
                padding:10px 8px;vertical-align:middle;
            }
            .table{font-size:14px;}
            .table>tbody>tr>td>span{vertical-align:middle;padding-top:1px;margin-top:2px;display:inline-block;}
            .table>tbody>tr>td>span.Beyond{color:#1777e5;}
            .table>thead>tr>th>span{vertical-align:middle;padding-top:1px;margin-top:1px;display:inline-block;}
            .message-bar{position:absolute;margin-left:-58px;left:50%;}
            .pagination>li.active>a{
                background-color:#1777e5;
            }
            .pagination>li.active>a:hover{
                background-color:#1777e5;
            }
            .overflowspan{
                display: block;
                overflow: hidden;
                white-space: nowrap;
                text-overflow: ellipsis;
            }
            .badge {
                position: absolute !important;
                top: 2px;
                right: 2px;
                padding: 1px 3px;
                text-align: center;
                font-size: 12px;
                color: #FFF;
            } 
        </style>
        <script src="../assets/js/jquery.min.js"></script>
        <script src="../layer/layer.min.js"></script>
        <script src="../myjs/lexus.js"></script>
        <script src="../myjs/file.js"></script>
    </head>
    
    <body class="no-skin">
        <div id="Loading" style=""></div>
        <div id="tempDiv" style="display: none"></div>
        <div class="main-container" id="main-container">
            <div class="main-content">
                <!-- #section:basics/content.breadcrumbs -->
                <div class="breadcrumbs" id="breadcrumbs" style="background:#1777e5;">
                    <script type="text/javascript">
                        try {
                            ace.settings.check('breadcrumbs', 'fixed')
                        } catch(e) {}
                    </script>
                    <ul class="breadcrumb">
                        <li>
                            <i class="ace-icon fa fa-home home-icon white">
                            </i>
                            <a href="#" id="qiyemenghu" onclick="MHUrl()" class="white">企业信息门户</a>
                        </li>
                        <li>
                            <a href="#" class="white">
                                档案业务待处理
                            </a>
                        </li>
                    </ul>
                    <!-- /.breadcrumb -->
                    <!-- /section:basics/content.searchbox -->
                </div>
                <div class="row-fluid  page-content">
                    <div class="page-header" style="border-bottom:solid 1px #1777e5;">
                        <input type="hidden" id="begD" value="">
                        <input type="hidden" id="endD" value="">
                        <h1 style="font-family:Microsoft YaHei ! important;color:#1a1a1a;">
                            <span id="titleH1">档案业务待处理</span>
                            <!-- <small>
                                <i class="ace-icon fa fa-angle-double-right">
                                </i>
                                自定义数据
                            </small> -->
                        </h1>
                    </div>
                    <div class="tabbable">
                        <ul class="nav nav-tabs padding-12">
                            <li class="active" onclick="navTabs(this)">
                                <a data-toggle="tab" href="#FileTabNav_01">
                                    <i class="green ace-icon fa fa-floppy-o bigger-120" style="color:#1777e5;"></i>
                                    <span>存档</span>
                                    <span class="badge badge-important" id="WTabCount01"></span>
                                </a>
                            </li>
                            <li class="" onclick="navTabs(this)">
                                <a data-toggle="tab" href="#FileTabNav_02">
                                    <i class="ace-icon fa fa-user bigger-120" style="color:#ffb752;"></i>
                                    <span>借阅</span>
                                    <span class="badge badge-important" id="WTabCount02"></span>
                                </a>
                            </li>
                            <li class="" onclick="navTabs(this)">
                                <a data-toggle="tab" href="#FileTabNav_03">
                                    <i class="ace-icon fa fa-tags bigger-120" style="color:#9585bf"></i>
                                    <span>销毁</span>
                                    <span class="badge badge-important" id="WTabCount03"></span>
                                </a>
                            </li>
                            <div style="float:right;">
                                <button class="btn btn-info pull-right" type="button" id="tongyi" onClick="submitAll();">
                                    <i class="ace-icon fa fa-check bigger-110"></i>
                                    同意
                                </button>
                            </div>
                        </ul>
                        <div class="tab-content profile-edit-tab-content">
                            <!-- 存档待处理 -->
                            <div id="FileTabNav_01" class="tab-pane in active">
                                <div style="border-bottom: 1px solid #7ea8fb;">
                                    <table id="sample-table-2" class="table table-striped table-bordered table-hover tableShow" style="margin-bottom:0px;">
                                        <thead>
                                            <tr>
                                                <th class="center" style="width:60px;">
                                                    <label class="position-relative">
                                                        <input type="checkbox" name="bhgpAll" id="bhgpAll" onclick="ChkAllClick(this);" class="ace toggle-all" />
                                                        <span class="lbl"></span>
                                                    </label>
                                                </th>
                                                <th width="20%">
                                                    <span class="">存档文件名称</span>
                                                </th>
                                                <th width="20%">
                                                    <span class="">存档人</span>
                                                </th>
                                                <th width="20%">
                                                    <span class="">存档部门</span>
                                                </th>
                                                <th width="20%">
                                                    <span class="">提交时间</span>
                                                </th>
                                                <th style="text-align:right;">
                                                    <span class="">查看原文</span>
                                                </th>
                                                <th class="center" style="width:30px;">

                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="WaitHandleList01">
                                            
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- 借阅待处理 -->
                            <div id="FileTabNav_02" class="tab-pane in">
                                <div style="border-bottom: 1px solid #7ea8fb;">
                                    <table id="sample-table-2" class="table table-striped table-bordered table-hover tableShow" style="margin-bottom:0px;">
                                        <thead>
                                            <tr>
                                                <th class="center" style="width:60px;">
                                                    <label class="position-relative">
                                                        <input type="checkbox" name="bhgpAll" id="bhgpAll" onclick="ChkAllClick(this);" class="ace toggle-all" />
                                                        <span class="lbl"></span>
                                                    </label>
                                                </th>
                                                <th width="20%">
                                                    <span class="Beyond">借阅目的</span>
                                                </th>
                                                <th width="20%">
                                                    <span class="Beyond">借阅人</span>
                                                </th>
                                                <th width="20%">
                                                    <span class="Beyond">档案密级</span>
                                                </th>
                                                <th width="20%">
                                                    <span class="Beyond">利用方式</span>
                                                </th>
                                                <th style="text-align:right;">
                                                    <span class="Beyond">提交时间</span>
                                                </th>
                                                <th class="center" style="width:30px;">

                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="WaitHandleList02">

										</tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- 销毁待处理 -->
                            <div id="FileTabNav_03" class="tab-pane in">
                                <div style="border-bottom: 1px solid #7ea8fb;">
                                    <table id="sample-table-2" class="table table-striped table-bordered table-hover tableShow" style="margin-bottom:0px;">
                                        <thead>
                                            <tr>
                                                <th class="center" style="width:60px;">
                                                    <label class="position-relative">
                                                        <input type="checkbox" name="bhgpAll" id="bhgpAll" onclick="ChkAllClick(this);" class="ace toggle-all" />
                                                        <span class="lbl"></span>
                                                    </label>
                                                </th>
                                                <th width="20%">
                                                    <span class="Beyond">鉴定方案</span>
                                                </th>
                                                <!-- <th width="20%">
                                                    <span class="Beyond">档案密级</span>
                                                </th> -->
                                                <th width="20%">
                                                    <span class="Beyond">申请人</span>
                                                </th>
                                                <th width="20%">
                                                    <span class="Beyond">档案部门</span>
                                                </th>
                                                <th style="text-align:right;">
                                                    <span class="Beyond">提交时间</span>
                                                </th>
                                                <th class="center" style="width:30px;">

                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="WaitHandleList03">
                                            
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div style="border-bottom: 1px solid #7ea8fb;background-color:#EFF3F8;padding:12px 24px;border-top:none;overflow:hidden;">
                            <div style="float:left;margin:0px;height:32px;">
                                <label style="margin:0px;">
                                    <span style="float:left;height:32px;line-height:32px;">每页显示</span>
                                    <span style="float:left;margin:0 10px">
                                        <select name="sample-table-2_length" id="InfoArticle" aria-controls="sample-table-2" class="form-control input-sm" style="height:32px;line-height:32px;">
                                            <option onclick="changePageSize('10')" value="10">10</option>
                                            <option onclick="changePageSize('20')" value="20">20</option>
                                            <option onclick="changePageSize('50')" value="50">50</option>
                                            <option onclick="changePageSize('100')" value="100">100</option>
                                        </select> 
                                    </span>
                                    <span style="float:left;height:32px;line-height:32px;">条</span>
                                </label>
                            </div>
                            <ul class="pagination" id="page" style="float:right;margin:0px;">
                                <li class="" id="FirstPage">
                                    <a href="javascript:void(0);" onclick="PagJump(0)">
                                        <i class="ace-icon fa fa-angle-double-left"></i>
                                    </a>
                                </li>
                                <li class="" id="PrevPage">
                                    <a href="javascript:void(0);" onclick="PagJump(1)">
                                        <i class="ace-icon fa fa-angle-left"></i>
                                    </a>
                                </li>
                                <li class="active">
                                    <a href="javascript:void(0);">
                                        <span id="CNum">1</span>
                                        <span>/</span>
                                        <span id="AllPage">1</span>
                                    </a>
                                </li>
                                <li id="NextPage">
                                    <a href="javascript:void(0);" onclick="PagJump(2)">
                                        <i class="ace-icon fa fa-angle-right"></i>
                                    </a>
                                </li>
                                <li id="LastPage">
                                    <a href="javascript:void(0);" onclick="PagJump(3)">
                                        <i class="ace-icon fa fa-angle-double-right"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!------------------------------------------------------------------------------------------->
        <!-- basic scripts -->
        <!--[if !IE]> -->
        <script type="text/javascript">
            window.jQuery || document.write("<script src='../assets/js/jquery.min.js'>" + "<" + "/script>");
        </script>
        <!-- <![endif]-->
        <!--[if IE]>
            <script type="text/javascript">
                window.jQuery || document.write("<script src='../assets/js/jquery1x.min.js'>" + "<" + "/script>");
            </script>
        <![endif]-->
        <script type="text/javascript">
            if ('ontouchstart' in document.documentElement) document.write("<script src='../assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
        </script>
        <script src="../assets/js/bootstrap.min.js"></script>
        <!-- page specific plugin scripts -->
        <script src="../assets/js/bootstrap-tag.min.js"></script>
        <script src="../assets/js/jquery.hotkeys.min.js"></script>
        <script src="../assets/js/bootstrap-wysiwyg.min.js"></script>
        <script src="../assets/js/jquery-ui.custom.min.js"></script>
        <script src="../assets/js/chosen.jquery.min.js"></script>
        <script src="../assets/js/jquery.ui.touch-punch.min.js"></script>
        <script src="../assets/js/date-time/bootstrap-datepicker.min.js"></script>
        <script src="../assets/js/jquery.slimscroll.min.js"></script>
        <!-- ace scripts -->
        <script src="../assets/js/ace-elements.min.js"></script>
        <script src="../assets/js/ace.min.js"></script>
        <!-- inline scripts related to this page -->
        <script type="text/javascript">
        var f_pageSize = 10;
        var f_pageNow = 1;
        var f_pageAll = 1;
            function CloseGritter(obj){
                $(obj).parents(".gritter-item-wrapper").fadeOut(function(){
                    $(obj).parents(".gritter-item-wrapper").remove();
                });
                window.location.reload();
            }
            function CloseGritter_two(obj){
                $(obj).parents(".gritter-item-wrapper").fadeOut(function(){
                    $(obj).parents(".gritter-item-wrapper").remove();
                });
            }
            function WindowClose(){
                window.close();
            }
            // --列头全选框被单击---
            function ChkAllClick(o){
                var a = document.getElementsByName("bhgpID");
                for (var i = 0; i < a.length; i++) {
                    a[i].checked = o.checked;
                }
            }
            var length1 = 0;
            // --子项复选框被单击---
            function ChkSonClick(o) {
                if (o.checked == true) {
                    length1 += 1;
                }
                if (o.checked == false) {
                    length1 -= 1;
                }
                var length2 = document.getElementsByName("bhgpID").length - 1;
                var allc = document.getElementsByName("bhgpAll");
                if (length1 === length2) {
                    allc.checked = true;
                }
                if (length1 !== length2) {
                    allc.checked = false;
                }
            }
            //tab标签页切换文字
            function navTabs(obj){
                var opts = {            
                    lines: 10, // 花瓣数目
                    length: 0, // 花瓣长度
                    width: 10, // 花瓣宽度
                    radius: 20, // 花瓣距中心半径
                    corners: 1, // 花瓣圆滑度 (0-1)
                    rotate: 0, // 花瓣旋转角度
                    direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                    color: '#2679b5', // 花瓣颜色
                    speed: 1, // 花瓣旋转速度
                    trail: 60, // 花瓣旋转时的拖影(百分比)
                    shadow: false, // 花瓣是否显示阴影
                    hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                    className: 'spinner', // spinner css 样式名称
                    zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                    top: '-100', // spinner 相对父容器Top定位 单位 px
                    left: '0'// spinner 相对父容器Left定位 单位 px
                };
                var target = document.getElementById("Loading");  
                var spinner = new Spinner(opts).spin(target);
                pagei = $.layer({
                    type: 1,   //0-4的选择,
                    title: false,
                    border: [0],
                    closeBtn: [0],
                    shadeClose: false,
                    area: ['auto', 'auto'],
                    page: {dom : '#Loading'}
                });
                setTimeout(function() {
                    $("#titleH1").text($(obj).find("span").eq(0).text()+'待处理');
                    //alert(123);
                    if( $(obj).find("span").eq(0).text() == "存档" ){
                        var bussType = 'FMS_SAVE';
                    }else if( $(obj).find("span").eq(0).text() == "借阅" ){
                        var bussType = 'FMS_READ';
                    }else if( $(obj).find("span").eq(0).text() == "销毁" ){
                        var bussType = 'FMS_DEST';
                    }
                    // localStorage.removeItem("bussType");
                    // localStorage.bussType = JSON.stringify(bussType);
                    // GSP_W_ID_List(1,10,bussType);
                    f_pageNow = 1;
                    File_W_ID_List(f_pageNow,f_pageSize,bussType);
                    spinner.spin();
                    layer.close(pagei);
                }, 300 + parseInt(Math.random() * 300));
            }
            
             //tab标签页切换文字
            function IframeNavTabs(bussType){
                $(".nav-tabs").children("li").removeClass("active");
                $(".tab-content").children("div.tab-pane").removeClass("active");
                if( bussType == "FMS_SAVE" ){
                    var title = '存档';
                    $(".nav-tabs").children("li").eq(0).addClass("active");
                    $(".tab-content").children("div.tab-pane").eq(0).addClass("active");
                }else if( bussType == "FMS_READ" ){
                    var title = '借阅';
                    $(".nav-tabs").children("li").eq(1).addClass("active");
                    $(".tab-content").children("div.tab-pane").eq(1).addClass("active");
                }else if( bussType == "FMS_DEST" ){
                    var title = '销毁';
                    $(".nav-tabs").children("li").eq(2).addClass("active");
                    $(".tab-content").children("div.tab-pane").eq(2).addClass("active");
                }
                //$("#titleH1").text(title);
                localStorage.removeItem("bussType");
                localStorage.bussType = bussType;
                $(".main-container").css({"height":"auto"});
                $(".xubox_iframe").remove();
                $(".xubox_layer").remove();
                $(".xubox_shade").remove();
                f_pageNow = 1;
                File_W_ID_List(f_pageNow,f_pageSize,bussType);
            }
            //展开详情-存档
            function Open_Detailed(bussNo,reqUsrNm,reqUsrId,taskId,currStep){
                var dtData = {bussNo:bussNo,reqUsrNm:reqUsrNm,reqUsrId:reqUsrId,taskId:taskId,currStep:currStep};
                localStorage.setItem("file_spData",JSON.stringify(dtData));
                $.layer({
                    type: 2,
                    border: [0],
                    title: false,
                    shadeClose: true,
                    closeBtn: false,
                    shade: [0.6, '#000'],
                    offset: ['26px',''],
                    area: ['1000px',($(window).height() - 52) +'px'],
                    iframe: { src: './WDetails_ChunDang.html' }
                });
            }
            //展开详情-借阅
            function Open_jieyue(bussNo,reqUsrNm,reqUsrId,taskId,currStep){
            	var dtData = {bussNo:bussNo,reqUsrNm:reqUsrNm,reqUsrId:reqUsrId,taskId:taskId,currStep:currStep};
                localStorage.setItem("file_spData",JSON.stringify(dtData));
                //alert(JSON.stringify(dtData));
                //return;
                $.layer({
                    type: 2,
                    border: [0],
                    title: false,
                    shadeClose: true,
                    closeBtn: false,
                    shade: [0.6, '#000'],
                    offset: ['26px',''],
                    area: ['1000px',($(window).height() - 52) +'px'],
                    iframe: { src: './WDetails_jieyue.html' }
                });
            }
            //展开详情-借阅
            function Open_xiaohui(bussNo,reqUsrNm,reqUsrId,taskId,currStep){
            	var dtData = {bussNo:bussNo,reqUsrNm:reqUsrNm,reqUsrId:reqUsrId,taskId:taskId,currStep:currStep};
                localStorage.setItem("file_spData",JSON.stringify(dtData));
                $.layer({
                    type: 2,
                    border: [0],
                    title: false,
                    shadeClose: true,
                    closeBtn: false,
                    shade: [0.6, '#000'],
                    offset: ['26px',''],
                    area: ['1000px',($(window).height() - 52) +'px'],
                    iframe: { src: './WDetails_xiaohui.html' }
                });
            }

            function OpenYuanWen(bussNo){
            	var bussNo = bussNo.split("_")[0];
            	var dtJSON = getDetail(bussNo,"FMS_SAVE");
                if(dtJSON.status != "0"){
                    layer.alert('请勿擅自修改请求信息，您的本次操作已被记录',8,function(){
                        window.close();
                    });
                }else{
                    $('#tempDiv').html(dtJSON.return);
                    var backURL = $('#tempDiv').find("URL").html();
                    if(backURL == ""){
                        goToTop();
                        $.gritter.add({
                            title: '提示信息',
                            text: '没有原文地址信息',
                            class_name: 'gritter-error'
                        });
                    }else{
                        window.open(backURL);
                    }
                    
                }
            }

            //刷新GSP待办ID列表-返回ID数组
            function File_W_ID_List(CNum,pagesize,bussType){
                localStorage.bussType = bussType;
            	var bussnoArr = [];//保存待办列表的所有id
            	var subAll = {};
                var File_W_ListsJSON = Filesubmit_W_1(localStorage.pernrBase?localStorage.pernrBase:'',bussType,CNum,pagesize);

                if(File_W_ListsJSON.status == '0'){
                    
                    var totalCount = parseInt(File_W_ListsJSON.output.totalCount);
                    f_pageAll = totalCount%f_pageSize == 0?totalCount/f_pageSize:(parseInt(totalCount/f_pageSize)+1);
                    //alert(f_pageAll);
                    f_pageNow = CNum;
                    $('#CNum').html(CNum);
                    $('#AllPage').html(f_pageAll);
                    
                    var waitTaskList = File_W_ListsJSON.output.waitTaskList;
                    if( bussType == 'FMS_SAVE' ){				//存档
                    	var FWList = "";
                    	if( waitTaskList.length == undefined ){
                            FWList +='<tr>'
                            			+'<td class="center" style="width:60px;">'
                                            +'<label class="position-relative">'
                                                +'<input type="checkbox" name="bhgpID" value="'+checkNoChar1(waitTaskList.bussNo)+','+checkNoChar1(waitTaskList.taskId)+','+checkNoChar1(waitTaskList.currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
                                                +'<span class="lbl"></span>'
                                            +'</label>'
                                        +'</td>'
                                        +'<td title="" onclick="Open_Detailed(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList.taskName)+'</span>'
                                        +'</td>'
                                        +'<td title="" onclick="Open_Detailed(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList.reqUsrNm)+'</span>'
                                        +'</td>'
                                        +'<td title=""  onclick="Open_Detailed(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="">'+checkNoChar1(waitTaskList.deptName)+'</span>'
                                        +'</td>'
                                        +'<td title="" onclick="Open_Detailed(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="">'+checkNoChar1(waitTaskList.crtDate).substring(0,10)+'</span>'
                                        +'</td>'
                                        +'<td title="" style="text-align:right;" onclick="">'
                                            +'<span class="Beyond" style="padding-right:12px;"><a onclick="OpenYuanWen(\''+checkNoChar1(waitTaskList.bussNo)+'\')">查看</a></span>'
                                        +'</td>'
                                        +'<td class="center" style="width:30px;">'
                                        +'</td>'
                                    +'</tr>';
                    	}else{
                    		for( var i = 0; i < waitTaskList.length; i++){
	                            FWList +='<tr>'
	                            			+'<td class="center" style="width:60px;">'
	                                            +'<label class="position-relative">'
	                                                +'<input type="checkbox" name="bhgpID" value="'+checkNoChar1(waitTaskList[i].bussNo)+','+checkNoChar1(waitTaskList[i].taskId)+','+checkNoChar1(waitTaskList[i].currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
	                                                +'<span class="lbl"></span>'
	                                            +'</label>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_Detailed(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList[i].taskName)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_Detailed(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList[i].reqUsrNm)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_Detailed(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="">'+checkNoChar1(waitTaskList[i].deptName)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_Detailed(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="">'+checkNoChar1(waitTaskList[i].crtDate).substring(0,10)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" style="text-align:right;" onclick="">'
	                                            +'<span class="Beyond" style="padding-right:12px;"><a onclick="OpenYuanWen(\''+checkNoChar1(waitTaskList[i].bussNo)+'\')">查看</a></span>'
	                                        +'</td>'
	                                        +'<td class="center" style="width:30px;">'
	                                        +'</td>'
	                                    +'</tr>'
	                        }
                    	}
                        $('#WaitHandleList01').html(FWList);

	            	}else if( bussType == 'FMS_DEST' ){			//销毁

	            		var FWList = "";
                    	if( waitTaskList.length == undefined ){
                            FWList +='<tr>'
                                        +'<td class="center" style="width:60px;">'
                                            +'<label class="position-relative">'
                                                +'<input type="checkbox" name="bhgpID" value="'+checkNoChar1(waitTaskList.bussNo)+','+checkNoChar1(waitTaskList.taskId)+','+checkNoChar1(waitTaskList.currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
                                                +'<span class="lbl"></span>'
                                            +'</label>'
                                        +'</td>'
                                        +'<td title="" onclick="Open_xiaohui(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList.taskName)+'</span>'
                                        +'</td>'
                                        +'<td title="" onclick="Open_xiaohui(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList.reqUsrNm)+'</span>'
                                        +'</td>'
                                        +'<td title=""  onclick="Open_xiaohui(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="">'+checkNoChar1(waitTaskList.deptName)+'</span>'
                                        +'</td>'
                                        +'<td title="" style="text-align:right;" onclick="Open_xiaohui(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="Beyond" style="padding-right:12px;">'+checkNoChar1(waitTaskList.crtDate).substring(0,10)+'</span>'
                                        +'</td>'
                                        +'<td class="center" style="width:30px;">'
                                        +'</td>'
                                    +'</tr>';
                    	}else{
                    		for( var i = 0; i < waitTaskList.length; i++){
	                            FWList +='<tr>'
	                                        +'<td class="center" style="width:60px;">'
	                                            +'<label class="position-relative">'
	                                                +'<input type="checkbox" name="bhgpID" value="'+checkNoChar1(waitTaskList[i].bussNo)+','+checkNoChar1(waitTaskList[i].taskId)+','+checkNoChar1(waitTaskList[i].currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
	                                                +'<span class="lbl"></span>'
	                                            +'</label>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_xiaohui(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList[i].taskName)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_xiaohui(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList[i].reqUsrNm)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_xiaohui(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="">'+checkNoChar1(waitTaskList[i].deptName)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" style="text-align:right;" onclick="Open_xiaohui(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="Beyond" style="padding-right:12px;">'+checkNoChar1(waitTaskList[i].crtDate).substring(0,10)+'</span>'
	                                        +'</td>'
	                                        +'<td class="center" style="width:30px;">'
	                                        +'</td>'
	                                    +'</tr>'
	                        }
                    	}
                        $('#WaitHandleList03').html(FWList);

	            	}else if( bussType == 'FMS_READ' ){			//借阅

	            		var FWList = "";
                    	if( waitTaskList.length == undefined ){
                            FWList +='<tr>'
                            			+'<td class="center" style="width:60px;">'
                                            +'<label class="position-relative">'
                                                +'<input type="checkbox" name="bhgpID" value="'+checkNoChar1(waitTaskList.bussNo)+','+checkNoChar1(waitTaskList.taskId)+','+checkNoChar1(waitTaskList.currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
                                                +'<span class="lbl"></span>'
                                            +'</label>'
                                        +'</td>'
                                        +'<td title="" onclick="Open_jieyue(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList.taskName)+'</span>'
                                        +'</td>'
                                        +'<td title="" onclick="Open_jieyue(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList.reqUsrNm)+'</span>'
                                        +'</td>'
                                        +'<td title=""  onclick="Open_jieyue(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="">'+checkNoChar1(waitTaskList.comA)+'</span>'
                                        +'</td>'
                                        +'<td title="" onclick="Open_jieyue(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="">'+checkNoChar1(waitTaskList.comB)+'</span>'
                                        +'</td>'
                                        +'<td title="" style="text-align:right;" onclick="Open_jieyue(\''+checkNoChar1(waitTaskList.bussNo)+'\',\''+checkNoChar1(waitTaskList.reqUsrNm)+'\',\''+checkNoChar1(waitTaskList.reqUsrId)+'\',\''+checkNoChar1(waitTaskList.taskId)+'\',\''+checkNoChar1(waitTaskList.currStep)+'\')">'
                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList.crtDate).substring(0,10)+'</span>'
                                        +'</td>'
                                        +'<td class="center" style="width:30px;">'
                                        +'</td>'
                                    +'</tr>';
                    	}else{
                    		for( var i = 0; i < waitTaskList.length; i++){
	                            FWList +='<tr>'
	                            			+'<td class="center" style="width:60px;">'
	                                            +'<label class="position-relative">'
	                                                +'<input type="checkbox" name="bhgpID" value="'+checkNoChar1(waitTaskList[i].bussNo)+','+checkNoChar1(waitTaskList[i].taskId)+','+checkNoChar1(waitTaskList[i].currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
	                                                +'<span class="lbl"></span>'
	                                            +'</label>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_jieyue(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList[i].taskName)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_jieyue(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList[i].reqUsrNm)+'</span>'
	                                        +'</td>'
	                                        +'<td title=""  onclick="Open_jieyue(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="">'+checkNoChar1(waitTaskList[i].comA)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" onclick="Open_jieyue(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="">'+checkNoChar1(waitTaskList[i].comB)+'</span>'
	                                        +'</td>'
	                                        +'<td title="" style="text-align:right;" onclick="Open_jieyue(\''+checkNoChar1(waitTaskList[i].bussNo)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrNm)+'\',\''+checkNoChar1(waitTaskList[i].reqUsrId)+'\',\''+checkNoChar1(waitTaskList[i].taskId)+'\',\''+checkNoChar1(waitTaskList[i].currStep)+'\')">'
	                                            +'<span class="Beyond">'+checkNoChar1(waitTaskList[i].crtDate).substring(0,10)+'</span>'
	                                        +'</td>'
	                                        +'<td class="center" style="width:30px;">'
	                                        +'</td>'
	                                    +'</tr>'
	                        }
                    	}
                        $('#WaitHandleList02').html(FWList);

	            	}
                }else{
                    
                }
            }

            function File_W_line_List(bussType,bussnoArr,subAll){
            	if( bussType == 'FMS_SAVE' ){				//存档

            	}else if( bussType == 'FMS_DEST' ){			//销毁

            	}else if( bussType == 'FMS_READ' ){			//借阅

            	}
            }

            jQuery(function($) {

            	//登录工号获取
                var localCookie = document.cookie;
                var cookie_user = '';
                if(localCookie.length > 0 && localCookie.indexOf('userid')>-1){
                    localCookie = localCookie.split(';');
                    for(var lc in localCookie){
                        if(localCookie[lc].indexOf('userid=')>-1){
                            cookie_user = localCookie[lc];
                            break;
                        }
                    } 
                    if(cookie_user == ''){
                        var unique_id = $.gritter.add({
                            title: '系统登录错误提示',
                            text: '无法获取信息，请重新登录<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter(this);WindowClose();"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                            sticky: true,
                            time: '',
                            class_name: 'gritter-info gritter-center'
                        });
                    }else{
                        cookie_user = trim(cookie_user).substring(7);
                        localStorage.removeItem('pernrBase');
                        localStorage.setItem('pernrBase',cookie_user);
                    }
                }else{
                    var unique_id = $.gritter.add({
                        title: '系统登录错误提示',
                        text: '无法获取信息，请重新登录<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter(this);WindowClose();"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                        sticky: true,
                        time: '',
                        class_name: 'gritter-info gritter-center'
                    });
                }
                //页面初始化
                $.ajaxSetup({
                    contentType: 'application/json',
                    async:false,
                    error:function(){
                        alert(errMsg1);
                    },
                    timeout:timeout
                });
                
                //请求条数
                getwtNum();
                // var wtNumJson = getWtNum(localStorage.pernrBase?localStorage.pernrBase:'');
                // if(wtNumJson.status == "0"){
                    // if(wtNumJson.output.fmsSaveWTNum != "0"){
                        // $('#WTabCount01').html(wtNumJson.output.fmsSaveWTNum);
                    // }
                    // if(wtNumJson.output.fmsReadWTNum != "0"){
                        // $('#WTabCount02').html(wtNumJson.output.fmsReadWTNum);
                    // }
                    // if(wtNumJson.output.fmsDestWTNum != "0"){
                        // $('#WTabCount03').html(wtNumJson.output.fmsDestWTNum);
                    // }
                // }
                

                // var opts = {            
                //     lines: 10, // 花瓣数目
                //     length: 0, // 花瓣长度
                //     width: 10, // 花瓣宽度
                //     radius: 20, // 花瓣距中心半径
                //     corners: 1, // 花瓣圆滑度 (0-1)
                //     rotate: 0, // 花瓣旋转角度
                //     direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                //     color: '#2679b5', // 花瓣颜色
                //     speed: 1, // 花瓣旋转速度
                //     trail: 60, // 花瓣旋转时的拖影(百分比)
                //     shadow: false, // 花瓣是否显示阴影
                //     hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                //     className: 'spinner', // spinner css 样式名称
                //     zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                //     top: '-100', // spinner 相对父容器Top定位 单位 px
                //     left: '0'// spinner 相对父容器Left定位 单位 px
                // };
                // var target = document.getElementById("Loading");  
                // var spinner = new Spinner(opts).spin(target);
                // pagei = $.layer({
                //     type: 1,   //0-4的选择,
                //     title: false,
                //     border: [0],
                //     closeBtn: [0],
                //     shadeClose: false,
                //     area: ['auto', 'auto'],
                //     page: {dom : '#Loading'}
                // });
                // setTimeout(function() {

    				// FMS_SAVE
					// FMS_DEST
					// FMS_READ

					// 存档  销毁  借阅

                	// W File待办
                    // A File已办
                    //默认File文档类型G001(存档)
                    var bussType = 'FMS_SAVE';
                    localStorage.removeItem("bussType");
                    localStorage.bussType = bussType;
                    //获取GSP待审批ID列表-GSP_W_List()
                    File_W_ID_List(f_pageNow,f_pageSize,bussType);

	            	// spinner.spin();
	             //    layer.close(pagei);
              //   }, 300 + parseInt(Math.random() * 300));

            });
            
            function goToTop(){
                $('body,html').animate({scrollTop:0},10);
            }
         
         //批量审批
         function submitAll(){
             var bussType = localStorage.bussType;
             var listDataId = "WaitHandleList";
                if(bussType == "FMS_SAVE"){
                    listDataId = "WaitHandleList01";
                }else if(bussType == "FMS_READ"){
                    listDataId = "WaitHandleList02";
                }else if(bussType == "FMS_DEST"){
                    listDataId = "WaitHandleList03";
                }
              
                var paramArr = [];
                $('#'+listDataId).find('input[name="bhgpID"]:checked').each(function(){
                        paramArr.push({
                            'value':$(this).val()
                        }); 
                    });
                if(paramArr.length == 0){
                    goToTop();
                    $.gritter.add({
                            title: '提示信息',
                            text: '请选择审批条目',
                            class_name: 'gritter-error'
                        });
                        
                        return;
                }
                
                var opts = {            
                    lines: 10, // 花瓣数目
                    length: 0, // 花瓣长度
                    width: 10, // 花瓣宽度
                    radius: 20, // 花瓣距中心半径
                    corners: 1, // 花瓣圆滑度 (0-1)
                    rotate: 0, // 花瓣旋转角度
                    direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                    color: '#2679b5', // 花瓣颜色
                    speed: 1, // 花瓣旋转速度
                    trail: 60, // 花瓣旋转时的拖影(百分比)
                    shadow: false, // 花瓣是否显示阴影
                    hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                    className: 'spinner', // spinner css 样式名称
                    zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                    top: '-100', // spinner 相对父容器Top定位 单位 px
                    left: '0'// spinner 相对父容器Left定位 单位 px
                };
                var target = document.getElementById("Loading");  
                var spinner = new Spinner(opts).spin(target);
                pagei = $.layer({
                    type: 1,   //0-4的选择,
                    title: false,
                    border: [0],
                    closeBtn: [0],
                    shadeClose: false,
                    area: ['auto', 'auto'],
                    page: {dom : '#Loading'}
                });
                $.each(paramArr, function(i, item){
                    var item = item.value.split(",");
                    var pener = localStorage.pernrBase?localStorage.pernrBase:'';
                    var bussNo = item[0];
                    var taskId = item[1];
                    var currStep = item[2];
                    var submitJSON = doFileSub(pener,bussType,bussNo,taskId,currStep,"1","同意");
                    if(submitJSON.status == '0'){
                        if( paramArr.length == i+1 ){
                            //审批完刷新
                            $.gritter.add({
                                    title: '成功操作提示信息',
                                    text: '操作成功',
                                    class_name: 'gritter-success'
                                });
                                setTimeout(function(){
                                    $('#WaitHandleList01').html(' ');
                                    $('#WaitHandleList02').html(' ');
                                    $('#WaitHandleList03').html(' ');
                                    getwtNum();
                                    IframeNavTabs(bussType);
                                },1500);
                                spinner.spin();
                                layer.close(pagei);
                        }
                    }else{
                        //失败
                        $.gritter.add({
                                title: '错误信息提示',
                                text: WSubmitListsData.errMsg,
                                class_name: 'gritter-error'
                            });
                            spinner.spin();
                            layer.close(pagei);
                            return false;
                    }
                });
                
                
            
                
                
         }
         
         function PagJump(jType){
                var bussType = localStorage.bussType;
                
                if(jType == 0){
                    //首页
                    if(f_pageNow == 1){
                        goToTop();
                        $.gritter.add({
                            title: '提示信息',
                            text: '当前已经是首页',
                            class_name: 'gritter-error'
                        });
                        return;
                    }
                    File_W_ID_List(1,f_pageSize,bussType);
                }else if(jType == 1){
                    //上一页
                    if(f_pageNow == 1){
                        goToTop();
                        $.gritter.add({
                            title: '提示信息',
                            text: '当前已经是首页',
                            class_name: 'gritter-error'
                        });
                        return;
                    }
                    File_W_ID_List(f_pageNow-1,f_pageSize,bussType);
                }else if(jType == 2){
                    //下一页
                    if(f_pageNow == f_pageAll){
                        goToTop();
                        $.gritter.add({
                            title: '提示信息',
                            text: '当前已经是末页',
                            class_name: 'gritter-error'
                        });
                        return;
                    }
                    File_W_ID_List(f_pageNow+1,f_pageSize,bussType);
                }else if(jType == 3){
                    //末页
                    if(f_pageNow == f_pageAll){
                        goToTop();
                        $.gritter.add({
                            title: '提示信息',
                            text: '当前已经是末页',
                            class_name: 'gritter-error'
                        });
                        return;
                    }
                    
                    File_W_ID_List(f_pageAll,f_pageSize,bussType);
                }
            }
            
            function changePageSize(size){
                var bussType = localStorage.bussType;
                if(size == f_pageSize){
                    return;
                }
                f_pageSize = size;
                f_pageNow = 1;
                File_W_ID_List(f_pageNow,f_pageSize,bussType);
            }
            
            //刷新条数
            function getwtNum(){
                $('#WTabCount01').html("");
                $('#WTabCount02').html("");
                $('#WTabCount03').html("");
                var wtNumJson = getWtNum(localStorage.pernrBase?localStorage.pernrBase:'');
                if(wtNumJson.status == "0"){
                    if(wtNumJson.output.fmsSaveWTNum != "0"){
                        $('#WTabCount01').html(wtNumJson.output.fmsSaveWTNum);
                    }
                    if(wtNumJson.output.fmsReadWTNum != "0"){
                        $('#WTabCount02').html(wtNumJson.output.fmsReadWTNum);
                    }
                    if(wtNumJson.output.fmsDestWTNum != "0"){
                        $('#WTabCount03').html(wtNumJson.output.fmsDestWTNum);
                    }
                }
            }
        </script>
        <link rel="stylesheet" href="../assets/css/ace.onpage-help.css" />
        <link rel="stylesheet" href="../docs/assets/js/themes/sunburst.css" />
        <script type="text/javascript">ace.vars['base'] = '..';</script>
        <script src="../assets/js/ace/ace.onpage-help.js"></script>
        <script src="../docs/assets/js/rainbow.js"></script>
        <script src="../docs/assets/js/language/generic.js"></script>
        <script src="../docs/assets/js/language/html.js"></script>
        <script src="../docs/assets/js/language/css.js"></script>
        <script src="../docs/assets/js/language/javascript.js"></script>
        <script src="../layer/layer.min.js"></script>
        <script src="../assets/js/jquery.gritter.min.js"></script>
        <script src="../assets/js/fuelux/fuelux.spinner.min.js"></script>
        <script src="../assets/js/spin.min.js"></script>
    </body>
</html>