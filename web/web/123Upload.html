<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>欢迎页图片管理</title>

    <meta name="description" content="Common form elements and layouts" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="./assets/css/font-awesome.min.css" />
    <link rel="stylesheet" href="./assets/css/dropzone.css" />
    <!-- page specific plugin styles -->
    <link rel="stylesheet" href="./assets/css/jquery.gritter.css" />
    <link rel="stylesheet" href="./assets/css/jquery-ui.custom.min.css" />
    <link rel="stylesheet" href="./assets/css/chosen.css" />
    <link rel="stylesheet" href="./assets/css/datepicker.css" />
    <link rel="stylesheet" href="./assets/css/bootstrap-timepicker.css" />
    <link rel="stylesheet" href="./assets/css/daterangepicker.css" />
    <link rel="stylesheet" href="./assets/css/bootstrap-datetimepicker.css" />
    <link rel="stylesheet" href="./assets/css/colorpicker.css" />

    <!-- text fonts -->
    <link rel="stylesheet" href="./assets/css/ace-fonts.css" />

    <!-- ace styles -->
    <link rel="stylesheet" href="./assets/css/ace.min.css" id="main-ace-style" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="./assets/css/ace-part2.min.css" />
    <![endif]-->
    <link rel="stylesheet" href="./assets/css/ace-skins.min.css" />
    <link rel="stylesheet" href="./assets/css/ace-rtl.min.css" />

    <!--[if lte IE 9]>
      <link rel="stylesheet" href="./assets/css/ace-ie.min.css" />
    <![endif]-->
    <!-- inline styles related to this page -->
    <!-- ace settings handler -->
    <script src="./assets/js/ace-extra.min.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lte IE 8]>
    <script src="./assets/js/html5shiv.js"></script>
    <script src="./assets/js/respond.min.js"></script>
    <![endif]-->

    <script src='./assets/js/jquery.min.js'></script>
    <script src="./layer/layer.min.js"></script>
    <script src="./myjs/jquery.form.js"></script>
    <script>
        function upload1() {
            var file = document.getElementById("file");
            var myForm = document.getElementById("myForm");
            var imgPath = $("#file").val();
            if (imgPath == "") {
               $.gritter.add({
                   title: '错误信息提示',
                   text: '请选择上传图片！',
                   class_name: 'gritter-error'
               });
               return;
            }
            //判断上传文件的后缀名
            var strExtension = imgPath.substr(imgPath.lastIndexOf('.') + 1);
            if (strExtension.toLowerCase() != 'jpg' && strExtension.toLowerCase() != 'gif'
            && strExtension.toLowerCase() != 'png' && strExtension.toLowerCase() != 'bmp') {
               $.gritter.add({
                   title: '错误信息提示',
                   text: '请选择图片文件',
                   class_name: 'gritter-error'
               });
               return;
            }
            myForm.appendChild(file);
            var options = {
               url: 'http://10.10.1.183:808/meet/uploadMeetRoomImage',
               data: {
                   file: imgPath
               },
               dataType: "json",
               contentType: "charset=UTF-8",
               timeout: 100000,
               beforeSubmit: function () {
                   $('body,html').animate({ scrollTop: 0 }, 10);
                   aa = layer.load('上传中...');
               },
               success: function (result) {
                   // alert(JSON.stringify(result.ImagesURL));
                   if (result.status == 0) {
                       if (undefined != aa) {
                           layer.close(aa);
                       }
                       $.gritter.add({
                           title: '消息信息提示',
                           text: '上传成功',
                           class_name: 'gritter-success'
                       });
                       alert(JSON.stringify(result));
                   }
               },
               error: function (result) {
                   if (undefined != aa) {
                       layer.close(aa);
                   }
                   $.gritter.add({
                       title: '错误信息提示',
                       text: '上传失败，请稍后重试！',
                       class_name: 'gritter-error'
                   });
               }
            };
            $(myForm).ajaxSubmit(options);
            return !1;
        }
    </script>
</head>

<body class="no-skin">
  <label class="ace-file-input">
      <div class="space"></div>
      <input type="file" id="file" name="file" onchange="upload1(this)">
      <form id="myForm" action="http://10.10.1.183:808/meet/uploadMeetRoomImage" method="post" enctype="multipart/form-data"></form>
  </label>

    <!-- basic scripts -->
    <!--[if !IE]> -->
    <script type="text/javascript">
        window.jQuery || document.write("<script src='./assets/js/jquery.min.js'>" + "<" + "/script>");
    </script>

    <!-- <![endif]-->
    <!--[if IE]>
    <script type="text/javascript">
     window.jQuery || document.write("<script src='./assets/js/jquery1x.min.js'>"+"<"+"/script>");
    </script>
    <![endif]-->
    <script type="text/javascript">
        if ('ontouchstart' in document.documentElement) document.write("<script src='./assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
    </script>
    <script src="./assets/js/bootstrap.min.js"></script>

    <!-- page specific plugin scripts -->
    <!--[if lte IE 8]>
      <script src="./assets/js/excanvas.min.js"></script>
    <![endif]-->
    <script src="./assets/js/jquery-ui.custom.min.js"></script>
    <script src="./assets/js/jquery.ui.touch-punch.min.js"></script>
    <script src="./assets/js/chosen.jquery.min.js"></script>
    <script src="./assets/js/fuelux/fuelux.spinner.min.js"></script>
    <script src="./assets/js/date-time/bootstrap-datepicker.min.js"></script>
    <script src="./assets/js/date-time/bootstrap-timepicker.min.js"></script>
    <script src="./assets/js/date-time/moment.min.js"></script>
    <script src="./assets/js/date-time/daterangepicker.min.js"></script>
    <script src="./assets/js/date-time/bootstrap-datetimepicker.min.js"></script>
    <script src="./assets/js/bootstrap-colorpicker.min.js"></script>
    <script src="./assets/js/jquery.knob.min.js"></script>
    <script src="./assets/js/jquery.autosize.min.js"></script>
    <script src="./assets/js/jquery.inputlimiter.1.3.1.min.js"></script>
    <script src="./assets/js/jquery.maskedinput.min.js"></script>
    <script src="./assets/js/bootstrap-tag.min.js"></script>
    <!--<script src="./assets/js/typeahead.jquery.min.js"></script>--><!-- 缺少 -->
    <script src="./assets/js/dropzone.min.js"></script>
    <!-- ace scripts -->
    <script src="./assets/js/ace-elements.min.js"></script>
    <script src="./assets/js/ace.min.js"></script>

    <script src="./assets/js/bootbox.min.js"></script>
    <script src="./assets/js/jquery.easypiechart.min.js"></script>
    <script src="./assets/js/jquery.gritter.min.js"></script>

    <!-- inline scripts related to this page -->
    <script type="text/javascript">
        jQuery(function ($) {
            //弹出框中图片控件
            $('#file').ace_file_input({
                style: 'well',
                btn_choose: 'Drop files here or click to choose',
                btn_change: null,
                no_icon: 'ace-icon fa fa-picture-o',
                droppable: true,
                thumbnail: 'large'
            })
        });
    </script>

    <link rel="stylesheet" href="./assets/css/ace.onpage-help.css" />
    <link rel="stylesheet" href="./docs/assets/js/themes/sunburst.css" />

    <script type="text/javascript"> ace.vars['base'] = '..'; </script>
    <!--<script src="./assets/js/ace/elements.onpage-help.js"></script>--> <!-- 缺少 -->
    <script src="./assets/js/ace/ace.onpage-help.js"></script>
    <script src="./docs/assets/js/rainbow.js"></script>
    <script src="./docs/assets/js/language/generic.js"></script>
    <script src="./docs/assets/js/language/html.js"></script>
    <script src="./docs/assets/js/language/css.js"></script>
    <script src="./docs/assets/js/language/javascript.js"></script>
</body>
</html>
