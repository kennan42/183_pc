<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta charset="utf-8" />
        <!-- bootstrap & fontawesome -->
        <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
        <link rel="stylesheet" href="../assets/css/font-awesome.min.css" />
        <link rel="stylesheet" href="../assets/css/jquery-ui.custom.min.css" />
        <link rel="stylesheet" href="../assets/css/chosen.css" />
        <link rel="stylesheet" href="../assets/css/datepicker.css"/>
        <link rel="stylesheet" href="../assets/css/bootstrap-timepicker.css" />
        <link rel="stylesheet" href="../assets/css/daterangepicker.css" />
        <link rel="stylesheet" href="../assets/css/bootstrap-datetimepicker.css"/>
        <link rel="stylesheet" href="../assets/css/colorpicker.css" />
        <link rel="stylesheet" href="../assets/css/jquery.gritter.css" /> 
        <!-- text fonts -->
        <link rel="stylesheet" href="../assets/css/ace-fonts.css" />
        <!-- ace styles -->
        <link rel="stylesheet" href="../assets/css/ace.min.css" />
        <!--[if lte IE 9]>
            <link rel="stylesheet" href="./assets/css/ace-part2.min.css" />
        <![endif]-->
        <link rel="stylesheet" href="../assets/css/ace-skins.min.css" />
        <link rel="stylesheet" href="../assets/css/ace-rtl.min.css" />
        <!--[if lte IE 9]>
            <link rel="stylesheet" href="../assets/css/ace-ie.min.css" />
        <![endif]-->
        <!-- inline styles related to this page -->
        <!-- ace settings handler -->
        <script src="../assets/js/ace-extra.min.js"></script>
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media
        queries -->
        <!--[if lte IE 8]>
            <script src="../assets/js/html5shiv.js">
            </script>
            <script src="../assets/js/respond.min.js">
            </script>
        <![endif]-->
        <title>
            GSP-首营待办事项
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type="text/css">
            .btn-info:active, .btn-info:hover, .open .btn-info.dropdown-toggle{
                background-color:#1567c5!important;
                border-color:#2e82ff;
            }
            .btn-info, .btn-info:focus {
                background-color:#2e82ff!important;
                border-color:#2e82ff;
            }
            .nav-tabs>li{margin-right:4px;margin-bottom:-2px;}
            .nav-tabs>li.active{margin-bottom:-1px;}
            .tab-content.profile-edit-tab-content{border:1px solid #7ea8fb;border-width:1px 0 0 0;-webkit-box-shadow:none;box-shadow:none;}
            .nav-tabs>li>a{padding: 14px 34px 14px 26px;font-size:16px;overflow:hidden;}
            .nav-tabs>li>a>.ace-icon{float:left;margin-right:6px;}
            .nav-tabs>li>a>span{float:left;margin-top:1px;}
            .nav-tabs{border-color:#7ea8fb;border-bottom: 1px solid #7ea8fb;}
            .nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover{
                color:#1777e5;
                border-color:#7ea8fb #7ea8fb transparent;
                border-top:2px solid #1777e5;  
            }
            .nav-tabs>li>a, .nav-tabs>li>a:focus{
                color:#1777e5;
                border-color:#7ea8fb;
                background-color: #fff;
            }
            .nav-tabs>li>a:hover{border-color:#7ea8fb;color:#1777e5;}

            .tab-content.profile-edit-tab-content{padding:8px 0;padding-bottom:0px;}
            .table-bordered{border:none;}
            .table-bordered>thead>tr{border-top: 1px solid #ddd;}
            .table-bordered>thead>tr,.table-bordered>tbody>tr{border:1px solid #ddd;border-width:0 1px;}
            .table-bordered>thead>tr.TrInterval,.table-bordered>tbody>tr.TrInterval{border:none;}
            .table-striped>tbody>tr:nth-child(odd)>td, .table-striped>tbody>tr:nth-child(odd)>th{background-color:#fff;}
            .table-bordered>tbody>tr.TrInterval>td,.table-bordered>thead>tr.TrInterval>th{border:none;padding:0;height:4px;background:#fff;}
            .table-hover>tbody>tr:hover>td, .table-hover>tbody>tr:hover>th{background-color:#e1e4fa;}
            .table-hover>tbody>tr:hover>td.TrInterval, .table-hover>tbody>tr:hover>th.TrInterval{background-color:#fff;}
            .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th{
                cursor:pointer;
            }
            .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th, .table-bordered>thead>tr>td, .table-bordered>thead>tr>th{
                border-width:1px 0;
            }
            .table>thead>tr{background-image:none;background-color:#1777e5;color:#fff;}
            .table>thead>tr>th{font-weight:normal;}
            .table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th{
                padding:10px 8px;vertical-align:middle;
            }
            .table{font-size:14px;}
            .table>tbody>tr>td>span.Beyond{vertical-align:middle;padding-top:1px;margin-top:2px;display:inline-block;}
            .table>thead>tr>th>span.Beyond{vertical-align:middle;padding-top:1px;margin-top:1px;display:inline-block;}
            .message-bar{position:absolute;margin-left:-58px;left:50%;}
            .pagination>li.active>a{
                background-color:#1777e5;
            }
            .pagination>li.active>a:hover{
                background-color:#1777e5;
            }
            .overflowspan{
                display: block;
                overflow: hidden;
                white-space: nowrap;
                text-overflow: ellipsis;
            }
            .badge {
                position: absolute !important;
                top: 2px;
                right: 2px;
                padding: 1px 3px;
                text-align: center;
                font-size: 12px;
                color: #FFF;
            }
            canvas{display:none;}
            .main-container{background:#fff;} 
        </style>
        <script src="../assets/js/jquery.min.js"></script>
        <script>
            
        </script>
    </head>
    
    <body class="no-skin" onresize="Reizes();">
        <div id="Loading" style=""></div>
        <div class="main-container" id="main-container">
            <div class="main-content">
                <!-- #section:basics/content.breadcrumbs -->
                <div class="breadcrumbs" id="breadcrumbs" style="background:#1777e5;">
                    <script type="text/javascript">
                        try {
                            ace.settings.check('breadcrumbs', 'fixed')
                        } catch(e) {}
                    </script>
                    <ul class="breadcrumb">
                        <li>
                            <i class="ace-icon fa fa-home home-icon white">
                            </i>
                            <a href="#" id="qiyemenghu" onclick="MHUrl()" class="white">企业信息门户</a>
                        </li>
                        <li>
                            <a href="#" class="white">
                                GSP审批业务
                            </a>
                        </li>
                    </ul>
                    <!-- /.breadcrumb -->
                    <!-- /section:basics/content.searchbox -->
                </div>
                <div class="row-fluid  page-content">
                    <div class="page-header" style="border-bottom:solid 1px #1777e5;">
                        <input type="hidden" id="begD" value="">
                        <input type="hidden" id="endD" value="">
                        <h1 style="font-family:Microsoft YaHei ! important;color:#1a1a1a;">
                            <span id="titleH1">首营企业待办</span>
                            <!-- <small>
                                <i class="ace-icon fa fa-angle-double-right">
                                </i>
                                自定义数据
                            </small> -->
                        </h1>
                    </div>
                    <div class="tabbable">
                        <ul class="nav nav-tabs padding-12">
                            <li class="active" onclick="navTabs(this)">
                                <a data-toggle="tab" href="#GSPTabNav_01">
                                    <i class="green ace-icon fa fa-building-o bigger-120" style="color:#1777e5;"></i>
                                    <span>首营企业待办</span>
                                    <span class="badge badge-important" id="WqiyeCount"></span>
                                </a>
                            </li>
                            <li class="" onclick="navTabs(this)">
                                <a data-toggle="tab" href="#GSPTabNav_02">
                                    <i class="ace-icon fa fa-user bigger-120" style="color:#ffb752;"></i>
                                    <span>首营客户待办</span>
                                    <span class="badge badge-important" id="WkehuCount"></span>
                                </a>
                            </li>
                            <li class="" onclick="navTabs(this)">
                                <a data-toggle="tab" href="#GSPTabNav_03">
                                    <i class="ace-icon fa fa-th-large bigger-120" style="color:#c64bd6;"></i>
                                    <span style="margin-top:0;">首营品种待办</span>
                                    <span class="badge badge-important" id="WpinzhongCount"></span>
                                </a>
                            </li>
                            <li class="" onclick="navTabs(this)">
                                <a data-toggle="tab" href="#GSPTabNav_04">
                                    <i class="ace-icon fa fa-tags bigger-120" style="color:#9585bf"></i>
                                    <span>不合格品待办</span>
                                    <span class="badge badge-important" id="WbuhegeCount"></span>
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content profile-edit-tab-content">
                            <!-- 首营企业待办 -->
                            <div id="GSPTabNav_01" class="tab-pane in active">
                                <div class="message-navbar clearfix" style="border:none;background:none;padding:0 12px;margin:0 0 8px;">
                                    <!-- #section:basics/content.searchbox -->
                                    <div class="nav-search minimized" style="float:left;right:auto;left:auto;top:7px;bottom:auto;">
                                        <form class="form-search" onsubmit="return false;">
                                            <span class="input-icon">
                                                <input type="text" id="G001Search" autocomplete="off" onfocus="adstF(this)" onblur="adstB(this)" class="input-small nav-search-input" placeholder="查询待办事项..." onkeypress="toSearch(this.value)">
                                                <i class="ace-icon fa fa-search nav-search-icon"></i>
                                            </span>
                                        </form>
                                    </div>
                                    <div class="message-bar bigger-150" style="height:42px;line-height:42px;color:#1777e5;">
                                        首营待办事项
                                    </div>
                                    <div style="float:right;">
                                        <button class="btn btn-info pull-right" type="button" id="tongyi" onClick="submitAll('G001');">
                                            <i class="ace-icon fa fa-check bigger-110"></i>
                                            同意
                                        </button>
                                    </div>
                                    <!-- /.nav-search -->
                                    <!-- /section:basics/content.searchbox -->
                                </div>
                                <div id="WaitHandleList_G001" style="border-bottom: 1px solid #7ea8fb;">

                                </div>
                            </div>
                            <div id="GSPTabNav_02" class="tab-pane in">
                                <div class="message-navbar clearfix" style="border:none;background:none;padding:0 12px;margin:0 0 8px;">
                                    <!-- #section:basics/content.searchbox -->
                                    <div class="nav-search minimized" style="float:left;right:auto;left:auto;top:7px;bottom:auto;">
                                        <form class="form-search" onsubmit="return false;">
                                            <span class="input-icon">
                                                <input type="text" id="G003Search" autocomplete="off" onfocus="adstF(this)" onblur="adstB(this)" class="input-small nav-search-input" placeholder="查询待办事项..." onkeypress="toSearch(this.value)">
                                                <i class="ace-icon fa fa-search nav-search-icon"></i>
                                            </span>
                                        </form>
                                    </div>
                                    <div class="message-bar bigger-150" style="height:42px;line-height:42px;color:#1777e5;">
                                        首营客户待办
                                    </div>
                                    <div style="float:right;">
                                        <button class="btn btn-info pull-right" type="button" id="tongyi" onClick="submitAll('G003');">
                                            <i class="ace-icon fa fa-check bigger-110"></i>
                                            同意
                                        </button>
                                    </div>
                                    <!-- /.nav-search -->
                                    <!-- /section:basics/content.searchbox -->
                                </div>
                                <div id="WaitHandleList_G003" style="border-bottom: 1px solid #7ea8fb;">

                                </div>
                            </div>
                            <div id="GSPTabNav_03" class="tab-pane in">
                                <div class="message-navbar clearfix" style="border:none;background:none;padding:0 12px;margin:0 0 8px;">
                                    <!-- #section:basics/content.searchbox -->
                                    <div class="nav-search minimized" style="float:left;right:auto;left:auto;top:7px;bottom:auto;">
                                        <form class="form-search" onsubmit="return false;">
                                            <span class="input-icon">
                                                <input type="text" id="G002Search" autocomplete="off" onfocus="adstF(this)" onblur="adstB(this)" class="input-small nav-search-input" placeholder="查询待办事项..." onkeypress="toSearch(this.value)">
                                                <i class="ace-icon fa fa-search nav-search-icon"></i>
                                            </span>
                                        </form>
                                    </div>
                                    <div class="message-bar bigger-150" style="height:42px;line-height:42px;color:#1777e5;">
                                        首营品种待办
                                    </div>
                                    <div style="float:right;">
                                        <button class="btn btn-info pull-right" type="button" id="tongyi" onClick="submitAll('G002');">
                                            <i class="ace-icon fa fa-check bigger-110"></i>
                                            同意
                                        </button>
                                    </div>
                                    <!-- /.nav-search -->
                                    <!-- /section:basics/content.searchbox -->
                                </div>
                                <div id="WaitHandleList_G002" style="border-bottom: 1px solid #7ea8fb;">

                                </div>
                            </div>
                            <div id="GSPTabNav_04" class="tab-pane in">
                                <div class="message-navbar clearfix" style="border:none;background:none;padding:0 12px;margin:0 0 8px;">
                                    <!-- #section:basics/content.searchbox -->
                                    <div class="nav-search minimized" style="float:left;right:auto;left:auto;top:7px;bottom:auto;">
                                        <form class="form-search" onsubmit="return false;">
                                            <span class="input-icon">
                                                <input type="text" id="G007Search" autocomplete="off" onfocus="adstF(this)" onblur="adstB(this)" class="input-small nav-search-input" placeholder="查询待办事项..." onkeypress="toSearch(this.value)">
                                                <i class="ace-icon fa fa-search nav-search-icon"></i>
                                            </span>
                                        </form>
                                    </div>
                                    <div class="message-bar bigger-150" style="height:42px;line-height:42px;color:#1777e5;">
                                        不合格品待办
                                    </div>
                                    <div style="float:right;">
                                        <button class="btn btn-info pull-right" type="button" id="tongyi" onClick="submitAll('G007');">
                                            <i class="ace-icon fa fa-check bigger-110"></i>
                                            同意
                                        </button>
                                    </div>
                                    <!-- /.nav-search -->
                                    <!-- /section:basics/content.searchbox -->
                                </div>
                                <div id="WaitHandleList_G007" style="border-bottom: 1px solid #7ea8fb;">

                                </div>
                            </div>
                        </div>
                        <div style="border-bottom: 1px solid #7ea8fb;background-color:#EFF3F8;padding:12px 24px;border-top:none;overflow:hidden;">
                            <div style="float:left;margin:0px;height:32px;">
                                <label style="margin:0px;">
                                    <span style="float:left;height:32px;line-height:32px;">每页显示</span>
                                    <span style="float:left;margin:0 10px">
                                        <select name="sample-table-2_length" id="InfoArticle" aria-controls="sample-table-2" class="form-control input-sm" style="height:32px;line-height:32px;">
                                            <option onclick="changePageSize('1')" value="1">1</option>
                                            <option onclick="changePageSize('2')" value="2">2</option>
                                            <option onclick="changePageSize('5')" value="5">5</option>
                                            <option onclick="changePageSize('10')" value="10">10</option>
                                        </select> 
                                    </span>
                                    <span style="float:left;height:32px;line-height:32px;">条</span>
                                </label>
                            </div>
                            <!-- <div style="float:right;margin-left:20px;height:32px;">
                                <label style="margin:0px;">
                                    <span style="float:left;height:32px;line-height:32px;">共</span>
                                    <span style="float:left;height:32px;margin:0 6px;line-height:32px;font-size:16px;font-weight:bold;color:#1777e5;">10</span>
                                    <span style="float:left;height:32px;line-height:32px;">页</span>
                                </label>
                            </div> -->
                            <ul class="pagination" id="page" style="float:right;margin:0px;">
                                <li class="disabled" id="FirstPage">
                                    <a href="javascript:void(0);" onclick="PagJump()">
                                        <i class="ace-icon fa fa-angle-double-left"></i>
                                    </a>
                                </li>
                                <li class="disabled" id="PrevPage">
                                    <a href="javascript:void(0);" onclick="PagJump()">
                                        <i class="ace-icon fa fa-angle-left"></i>
                                    </a>
                                </li>
                                <li class="active">
                                    <a href="javascript:void(0);">
                                        <span id="CNum">1</span>
                                        <span>/</span>
                                        <span id="AllPage">1</span>
                                    </a>
                                </li>
                                <li id="NextPage">
                                    <a href="javascript:void(0);" onclick="PagJump()">
                                        <i class="ace-icon fa fa-angle-right"></i>
                                    </a>
                                </li>
                                <li id="LastPage">
                                    <a href="javascript:void(0);" onclick="PagJump()">
                                        <i class="ace-icon fa fa-angle-double-right"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!------------------------------------------------------------------------------------------->
        <!-- basic scripts -->
        <!--[if !IE]> -->
        <script type="text/javascript">
            window.jQuery || document.write("<script src='../assets/js/jquery.min.js'>" + "<" + "/script>");
        </script>
        <!-- <![endif]-->
        <!--[if IE]>
            <script type="text/javascript">
                window.jQuery || document.write("<script src='../assets/js/jquery1x.min.js'>" + "<" + "/script>");
            </script>
        <![endif]-->
        <script type="text/javascript">
            if ('ontouchstart' in document.documentElement) document.write("<script src='../assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
        </script>
        <script src="../assets/js/bootstrap.min.js"></script>
        <!-- page specific plugin scripts -->
        <script src="../assets/js/bootstrap-tag.min.js"></script>
        <script src="../assets/js/jquery.hotkeys.min.js"></script>
        <script src="../assets/js/bootstrap-wysiwyg.min.js"></script>
        <script src="../assets/js/jquery-ui.custom.min.js"></script>
        <script src="../assets/js/chosen.jquery.min.js"></script>
        <script src="../assets/js/jquery.ui.touch-punch.min.js"></script>
        <script src="../assets/js/date-time/bootstrap-datepicker.min.js"></script>
        <script src="../assets/js/jquery.slimscroll.min.js"></script>
        <!-- ace scripts -->
        <script src="../assets/js/ace-elements.min.js"></script>
        <script src="../assets/js/ace.min.js"></script>
        <!-- inline scripts related to this page -->
        <script type="text/javascript">
            function CloseGritter(obj){
                $(obj).parents(".gritter-item-wrapper").fadeOut(function(){
                    $(obj).parents(".gritter-item-wrapper").remove();
                });
                window.location.reload();
            }
            function CloseGritter_two(obj){
                $(obj).parents(".gritter-item-wrapper").fadeOut(function(){
                    $(obj).parents(".gritter-item-wrapper").remove();
                });
            }
            function WindowClose(){
                window.close();
            }
            
            // //Open首营企业
            // function Open_Enterprise(){
            //     $.layer({
            //         type: 2,
            //         border: [0],
            //         title: false,
            //         shadeClose: true,
            //         closeBtn: false,
            //         shade: [0.6, '#000'],
            //         offset: ['26px',''],
            //         area: ['1000px',($(window).height() - 52) +'px'],
            //         iframe: { src: './WDetails_Enterprise.html' }
            //     });
            // } 

            // //Open首营客户待办
            // function Open_Customer(){
            //     $.layer({
            //         type: 2,
            //         border: [0],
            //         title: false,
            //         shadeClose: true,
            //         closeBtn: false,
            //         shade: [0.6, '#000'],
            //         offset: ['26px',''],
            //         area: ['1000px',($(window).height() - 52) +'px'],
            //         iframe: { src: './WDetails_Customer.html' }
            //     });
            // } 

            // //Open首营品种待办
            // function Open_Varieties(){
            //     $.layer({
            //         type: 2,
            //         border: [0],
            //         title: false,
            //         shadeClose: true,
            //         closeBtn: false,
            //         shade: [0.6, '#000'],
            //         offset: ['26px',''],
            //         area: ['1000px',($(window).height() - 52) +'px'],
            //         iframe: { src: './WDetails_Varieties.html' }
            //     });
            // } 

            // //Open不合格品待办
            // function Open_Drugs(){
            //     $.layer({
            //         type: 2,
            //         border: [0],
            //         title: false,
            //         shadeClose: true,
            //         closeBtn: false,
            //         shade: [0.6, '#000'],
            //         offset: ['26px',''],
            //         area: ['1000px',($(window).height() - 52) +'px'],
            //         iframe: { src: './WDetails_Drugs.html' }
            //     });
            // } 

            function adstF(obj){
                if( $(obj).val() == "查询待办事项..." ){
                    $(obj).val("");
                    $(obj).css({"color":"#444"});
                }
            }
            function adstB(obj){
                if( $(obj).val() == "" ){
                    $(obj).val("查询待办事项...");
                    $(obj).css({"color":"#ccc"});
                }
            }

            // --列头全选框被单击---
            function ChkAllClick(o){
                var a = document.getElementsByName("bhgpID");
                for (var i = 0; i < a.length; i++) {
                    a[i].checked = o.checked;
                }
            }
            var length1 = 0;
            // --子项复选框被单击---
            function ChkSonClick(o) {
                if (o.checked == true) {
                    length1 += 1;
                }
                if (o.checked == false) {
                    length1 -= 1;
                }
                var length2 = document.getElementsByName("bhgpID").length - 1;
                var allc = document.getElementsByName("bhgpAll");
                if (length1 === length2) {
                    allc.checked = true;
                }
                if (length1 !== length2) {
                    allc.checked = false;
                }
            }
            //tab标签页切换文字
            function navTabs(obj){
                var opts = {            
                    lines: 10, // 花瓣数目
                    length: 0, // 花瓣长度
                    width: 10, // 花瓣宽度
                    radius: 20, // 花瓣距中心半径
                    corners: 1, // 花瓣圆滑度 (0-1)
                    rotate: 0, // 花瓣旋转角度
                    direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                    color: '#2679b5', // 花瓣颜色
                    speed: 1, // 花瓣旋转速度
                    trail: 60, // 花瓣旋转时的拖影(百分比)
                    shadow: false, // 花瓣是否显示阴影
                    hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                    className: 'spinner', // spinner css 样式名称
                    zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                    top: '-100', // spinner 相对父容器Top定位 单位 px
                    left: '0'// spinner 相对父容器Left定位 单位 px
                };
                var target = document.getElementById("Loading");  
                var spinner = new Spinner(opts).spin(target);
                pagei = $.layer({
                    type: 1,   //0-4的选择,
                    title: false,
                    border: [0],
                    closeBtn: [0],
                    shadeClose: false,
                    area: ['auto', 'auto'],
                    page: {dom : '#Loading'}
                });
                setTimeout(function() {
                    $("#titleH1").text($(obj).find("span").eq(0).text());
                    if( $(obj).find("span").eq(0).text() == "首营企业待办" ){
                        var bussType = 'G001';
                    }else if( $(obj).find("span").eq(0).text() == "首营客户待办" ){
                        var bussType = 'G003';
                    }else if( $(obj).find("span").eq(0).text() == "首营品种待办" ){
                        var bussType = 'G002';
                    }else if( $(obj).find("span").eq(0).text() == "不合格品待办" ){
                        var bussType = 'G007';
                    }
                    localStorage.removeItem("bussType");
                    localStorage.bussType = JSON.stringify(bussType);
                    GSP_W_ID_List(1,10,bussType);
                    spinner.spin();
                    layer.close(pagei);
                }, 300 + parseInt(Math.random() * 300));
            }
            //tab标签页切换文字
            function IframeNavTabs(bussType){
                $(".nav-tabs").children("li").removeClass("active");
                $(".tab-content").children("div.tab-pane").removeClass("active");
                if( bussType == "G001" ){
                    var title = '首营企业待办';
                    $(".nav-tabs").children("li").eq(0).addClass("active");
                    $(".tab-content").children("div.tab-pane").eq(0).addClass("active");
                }else if( bussType == "G002" ){
                    var title = '首营品种待办';
                    $(".nav-tabs").children("li").eq(2).addClass("active");
                    $(".tab-content").children("div.tab-pane").eq(2).addClass("active");
                }else if( bussType == "G003" ){
                    var title = '首营客户待办';
                    $(".nav-tabs").children("li").eq(1).addClass("active");
                    $(".tab-content").children("div.tab-pane").eq(1).addClass("active");
                }else if( bussType == "G007" ){
                    var title = '不合格品待办';
                    $(".nav-tabs").children("li").eq(3).addClass("active");
                    $(".tab-content").children("div.tab-pane").eq(3).addClass("active");
                }
                $("#titleH1").text(title);
                localStorage.removeItem("bussType");
                localStorage.bussType = JSON.stringify(bussType);
                $(".main-container").css({"height":"auto"});
                $(".xubox_iframe").remove();
                $(".xubox_layer").remove();
                $(".xubox_shade").remove();
                GSP_W_ID_List(1,10,bussType);
            }
            //tab标签页切换文字
            function AllNavTabs(bussType){
                localStorage.removeItem("bussType");
                localStorage.bussType = JSON.stringify(bussType);
                GSP_W_ID_List(1,10,bussType);
            }
            //刷新GSP待办ID列表-返回ID数组
            function GSP_W_ID_List(CNum,pagesize,bussType){
                var bussnoArr = [];//保存待办列表的所有id

                var WqiyeCount = GSPsubmit_W_1(localStorage.pernrBase?localStorage.pernrBase:'','G001','1','1');
                if (WqiyeCount.output.message != "服务调用成功") {
                    $("#WqiyeCount").html('0');
                }else{
                    $("#WqiyeCount").html(WqiyeCount.output.totalCount);
                }
                
                var WkehuCount = GSPsubmit_W_1(localStorage.pernrBase?localStorage.pernrBase:'','G003','1','1');
                if (WkehuCount.output.message != "服务调用成功") {
                    $("#WkehuCount").html('0');
                }else{
                    $("#WkehuCount").html(WkehuCount.output.totalCount);
                }

                var WpinzhongCount = GSPsubmit_W_1(localStorage.pernrBase?localStorage.pernrBase:'','G002','1','1');
                if (WpinzhongCount.output.message != "服务调用成功") {
                    $("#WpinzhongCount").html('0');
                }else{
                    $("#WpinzhongCount").html(WpinzhongCount.output.totalCount);
                }
                
                var WbuhegeCount = GSPsubmit_W_1(localStorage.pernrBase?localStorage.pernrBase:'','G007','1','1');
                if (WbuhegeCount.output.message != "服务调用成功") {
                    $("#WbuhegeCount").html('0');
                }else{
                    $("#WbuhegeCount").html(WbuhegeCount.output.totalCount);
                }

                var subAll = {};
                var GSP_W_ListsJSON = GSPsubmit_W_1(localStorage.pernrBase?localStorage.pernrBase:'',bussType,CNum,pagesize);
                if(GSP_W_ListsJSON.status == '0'){
                    var waitTaskList = GSP_W_ListsJSON.output.waitTaskList;
                    if( waitTaskList.length == undefined ){
                        bussnoArr.push({
                            "APPID":waitTaskList.bussNo
                        });
                        subAll[waitTaskList.bussNo] = waitTaskList;
                    }else{
                        for(var i = 0; i < waitTaskList.length; i++){
                            bussnoArr.push({
                                "APPID":waitTaskList[i].bussNo
                            });
                            subAll[waitTaskList[i].bussNo] = waitTaskList[i];
                        }
                    }
                    var AllPage = GSP_W_ListsJSON.output.totalCount;
                    // var pageAll = parseInt(total)%parseInt(pageSize) == 0? parseInt(total)/parseInt(pageSize):(parseInt(total/pageSize)+1);
                    var PageNum = parseInt(AllPage)%parseInt(pagesize) == 0? parseInt(AllPage)/parseInt(pagesize):(parseInt(AllPage/pagesize)+1);
                    $("#CNum").html(CNum);
                    $("#AllPage").html(PageNum);
                    if( CNum == '1' ){
                        if( CNum == PageNum ){
                            $("#FirstPage").addClass("disabled");
                            $("#PrevPage").addClass("disabled");
                            $("#NextPage").addClass("disabled");
                            $("#LastPage").addClass("disabled");
                        }else{
                            $("#FirstPage").addClass("disabled");
                            $("#PrevPage").addClass("disabled");
                            $("#NextPage").removeClass("disabled");
                            $("#LastPage").removeClass("disabled");
                        }
                    }else{
                        if( CNum == PageNum ){
                            $("#FirstPage").removeClass("disabled");
                            $("#PrevPage").removeClass("disabled");
                            $("#NextPage").addClass("disabled");
                            $("#LastPage").addClass("disabled");
                        }else{
                            $("#FirstPage").removeClass("disabled");
                            $("#PrevPage").removeClass("disabled");
                            $("#NextPage").removeClass("disabled");
                            $("#LastPage").removeClass("disabled");
                        }
                    }
                    var FirstPageNum = 1;
                    var PrevPage = parseInt(CNum) - 1;
                    var NextPageNum = parseInt(CNum) + 1;
                    var LastPage = parseInt(PageNum);
                    $("#FirstPage a").attr('onclick','PagJump(\''+FirstPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                    $("#PrevPage a").attr('onclick','PagJump(\''+PrevPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                    $("#NextPage a").attr('onclick','PagJump(\''+NextPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                    $("#LastPage a").attr('onclick','PagJump(\''+LastPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                    
                    $("#page").children("li").each(function(){
                        if( $(this).hasClass("disabled") ){
                            $(this).children("a").attr('onclick','');
                        }
                    })
                    GSP_W_line_List(bussType,bussnoArr,subAll);
                }else{
                    if( bussType == 'G001' ){
                        sqTYPE = "首营企业待办"
                    }else if( bussType == 'G002' ){
                        sqTYPE = "首营品种待办"
                    }else if( bussType == 'G003' ){
                        sqTYPE = "首营客户待办"
                    }else if( bussType == 'G007' ){
                        sqTYPE = "不合格品待办"
                    }
                    // var unique_id = $.gritter.add({
                    //     title: 'GSP'+sqTYPE+'',
                    //     text: ''+GSP_W_ListsJSON.output.message+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                    //     sticky: true,
                    //     time: '',
                    //     class_name: 'gritter-info gritter-center'
                    // });
                    $('#WaitHandleList_'+bussType+'').html("");
                }
            }
            //刷新GSP待办详情列表-返回line列表
            function GSP_W_line_List(bussType,bussnoArr,subAll){
                if( bussType == 'G001' ){
                    var sqTYPE = "首营企业申请";
                    var GSP_W_gysvendListsJSON = GSPsubmit_W_G001(bussnoArr);
                    if( GSP_W_gysvendListsJSON.status == '0' ){
                        var GSPWList = GSP_W_gysvendListsJSON.ET_ZGSPWF001.item;
                        localStorage.removeItem("GSPWList");
                        localStorage.GSPWList = JSON.stringify(GSPWList);
                        var GWaitHandleList = "";
                        GWaitHandleList +='<table id="sample-table-2" class="table table-striped table-bordered table-hover tableShow" style="margin-bottom:0px;">'
                                        +'<thead>'
                                        +'<tr>'
                                        +'<th class="center" style="width:50px;">'
                                        +'<label class="position-relative">'
                                        +'<input type="checkbox" name="bhgpAll" id="bhgpAll" onclick="ChkAllClick(this);" class="ace toggle-all" />'
                                        +'<span class="lbl"></span>'
                                        +'</label>'
                                        +'</th>'
                                        +'<th width="14%"><span class="Beyond">申请类型</span></th>'
                                        +'<th width="28%"><span class="Beyond">主数据名称</span></th>'
                                        +'<th width="16%"><span class="Beyond">申请人姓名</span></th>'
                                        +'<th width="18%"><span class="Beyond">申请日期</span></th>'
                                        +'<th>备注</th>'
                                        +'</tr>'
                                        +'<tr class="TrInterval"><th></th></tr>'
                                        +'</thead>'
                                        +'<tbody>'
                                        for( var i = 0; i < GSPWList.length; i++){
                                            GWaitHandleList +='<tr>'
                                                            +'<td class="center" style="width:50px;">'
                                                            +'<label class="position-relative">'
                                                            +'<input type="checkbox" name="bhgpID" value="'+bussType+','+checkNoChar(GSPWList[i].APPLY_ID)+','+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+','+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
                                                            +'<span class="lbl"></span>'
                                                            +'</label>'
                                                            +'</td>'
                                                            +'<td title='+sqTYPE+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+sqTYPE+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].NAME1)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].NAME1)+' </span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].APPLY_NAME)+'  onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].APPLY_NAME)+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].APPLY_DATE)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].APPLY_DATE)+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].ZMARK)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].ZMARK)+'</span>'
                                                            +'</td>'
                                                            +'</tr>'
                                                            +'<tr class="TrInterval"><td></td></tr>'
                                        }
                                        +'</tbody>'
                                        +'</table>';
                        $('#WaitHandleList_'+bussType+'').html(GWaitHandleList);
                    }else{
                        // var unique_id = $.gritter.add({
                        //     title: 'GSP'+sqTYPE+'',
                        //     text: ''+GSP_W_gysvendListsJSON.ES_PUBLIC.MESSAGE+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                        //     sticky: true,
                        //     time: '',
                        //     class_name: 'gritter-info gritter-center'
                        // });
                        $('#WaitHandleList_'+bussType+'').html("");
                    }
                }else if( bussType == 'G002' ){
                    var sqTYPE = "首营品种申请";
                    var GSP_W_gysvendListsJSON = GSPsubmit_W_G002(bussnoArr);
                    if( GSP_W_gysvendListsJSON.status == '0' ){
                        var GSPWList = GSP_W_gysvendListsJSON.ET_ZGSPWF003.item;
                        localStorage.removeItem("GSPWList");
                        localStorage.GSPWList = JSON.stringify(GSPWList);
                        var GWaitHandleList = "";
                        GWaitHandleList +='<table id="sample-table-2" class="table table-striped table-bordered table-hover tableShow" style="margin-bottom:0px;">'
                                        +'<thead>'
                                        +'<tr>'
                                        +'<th class="center" style="width:50px;">'
                                        +'<label class="position-relative">'
                                        +'<input type="checkbox" name="bhgpAll" id="bhgpAll" onclick="ChkAllClick(this);" class="ace toggle-all" />'
                                        +'<span class="lbl"></span>'
                                        +'</label>'
                                        +'</th>'
                                        +'<th width="14%"><span class="Beyond">申请类型</span></th>'
                                        +'<th width="28%"><span class="Beyond">主数据名称</span></th>'
                                        +'<th width="16%"><span class="Beyond">申请人姓名</span></th>'
                                        +'<th width="18%"><span class="Beyond">申请日期</span></th>'
                                        +'<th>备注</th>'
                                        +'</tr>'
                                        +'<tr class="TrInterval"><th></th></tr>'
                                        +'</thead>'
                                        +'<tbody>'
                                        for( var i = 0; i < GSPWList.length; i++){
                                            GWaitHandleList +='<tr>'
                                                            +'<td class="center" style="width:50px;">'
                                                            +'<label class="position-relative">'
                                                            +'<input type="checkbox" name="bhgpID" value="'+bussType+','+checkNoChar(GSPWList[i].APPLY_ID)+','+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+','+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
                                                            +'<span class="lbl"></span>'
                                                            +'</label>'
                                                            +'</td>'
                                                            +'<td title='+sqTYPE+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+sqTYPE+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].MAKTX)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].MAKTX)+' </span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].APPLY_NAME)+'  onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].APPLY_NAME)+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].APPLY_DATE)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].APPLY_DATE)+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].ZMARK)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].ZMARK)+'</span>'
                                                            +'</td>'
                                                            +'</tr>'
                                                            +'<tr class="TrInterval"><td></td></tr>'
                                        }
                                        +'</tbody>'
                                        +'</table>';
                        $('#WaitHandleList_'+bussType+'').html(GWaitHandleList);
                    }else{
                        // var unique_id = $.gritter.add({
                        //     title: 'GSP'+sqTYPE+'',
                        //     text: ''+GSP_W_gysvendListsJSON.ES_PUBLIC.MESSAGE+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                        //     sticky: true,
                        //     time: '',
                        //     class_name: 'gritter-info gritter-center'
                        // });
                        $('#WaitHandleList_'+bussType+'').html("");
                    }
                }else if( bussType == 'G003' ){
                    var sqTYPE = "首营客户申请";
                    var GSP_W_gysvendListsJSON = GSPsubmit_W_G003(bussnoArr);
                    if( GSP_W_gysvendListsJSON.status == '0' ){
                        var GSPWList = GSP_W_gysvendListsJSON.ET_ZGSPWF004.item;
                        localStorage.removeItem("GSPWList");
                        localStorage.GSPWList = JSON.stringify(GSPWList);
                        var GWaitHandleList = "";
                        GWaitHandleList +='<table id="sample-table-2" class="table table-striped table-bordered table-hover tableShow" style="margin-bottom:0px;">'
                                        +'<thead>'
                                        +'<tr>'
                                        +'<th class="center" style="width:50px;">'
                                        +'<label class="position-relative">'
                                        +'<input type="checkbox" name="bhgpAll" id="bhgpAll" onclick="ChkAllClick(this);" class="ace toggle-all" />'
                                        +'<span class="lbl"></span>'
                                        +'</label>'
                                        +'</th>'
                                        +'<th width="14%"><span class="Beyond">申请类型</span></th>'
                                        +'<th width="28%"><span class="Beyond">主数据名称</span></th>'
                                        +'<th width="16%"><span class="Beyond">申请人姓名</span></th>'
                                        +'<th width="18%"><span class="Beyond">申请日期</span></th>'
                                        +'<th>备注</th>'
                                        +'</tr>'
                                        +'<tr class="TrInterval"><th></th></tr>'
                                        +'</thead>'
                                        +'<tbody>'
                                        for( var i = 0; i < GSPWList.length; i++){
                                            GWaitHandleList +='<tr>'
                                                            +'<td class="center" style="width:50px;">'
                                                            +'<label class="position-relative">'
                                                            +'<input type="checkbox" name="bhgpID" value="'+bussType+','+checkNoChar(GSPWList[i].APPLY_ID)+','+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+','+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
                                                            +'<span class="lbl"></span>'
                                                            +'</label>'
                                                            +'</td>'
                                                            +'<td title='+sqTYPE+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+sqTYPE+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].NAME1)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].NAME1)+' </span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].APPLY_NAME)+'  onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].APPLY_NAME)+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].APPLY_DATE)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].APPLY_DATE)+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList[i].ZMARK)+' onclick="Open_Detailed(\''+bussType+'\',\''+checkNoChar(GSPWList[i].APPLY_ID)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].taskId)+'\',\''+checkNoChar(subAll[GSPWList[i].APPLY_ID].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList[i].ZMARK)+'</span>'
                                                            +'</td>'
                                                            +'</tr>'
                                                            +'<tr class="TrInterval"><td></td></tr>'
                                        }
                                        +'</tbody>'
                                        +'</table>';
                        $('#WaitHandleList_'+bussType+'').html(GWaitHandleList);
                    }else{
                        // var unique_id = $.gritter.add({
                        //     title: 'GSP'+sqTYPE+'',
                        //     text: ''+GSP_W_gysvendListsJSON.ES_PUBLIC.MESSAGE+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                        //     sticky: true,
                        //     time: '',
                        //     class_name: 'gritter-info gritter-center'
                        // });
                        $('#WaitHandleList_'+bussType+'').html("");
                    }
                }else if( bussType == 'G007' ){
                    var sqTYPE = "不合格品报损申请";
                    var GSP_W_gysvendListsJSON = GSPsubmit_W_G007(bussnoArr);
                    if( GSP_W_gysvendListsJSON.status == '0' ){
                        var GSPWList = GSP_W_gysvendListsJSON;
                        localStorage.removeItem("GSPWList");
                        localStorage.GSPWList = JSON.stringify(GSPWList);
                        var GWaitHandleList = "";
                        GWaitHandleList +='<table id="sample-table-2" class="table table-striped table-bordered table-hover tableShow" style="margin-bottom:0px;">'
                                        +'<thead>'
                                        +'<tr>'
                                        +'<th class="center" style="width:50px;">'
                                        +'<label class="position-relative">'
                                        +'<input type="checkbox" name="bhgpAll" id="bhgpAll" onclick="ChkAllClick(this);" class="ace toggle-all" />'
                                        +'<span class="lbl"></span>'
                                        +'</label>'
                                        +'</th>'
                                        +'<th width="14%"><span class="Beyond">申请类型</span></th>'
                                        +'<th width="28%" id="TbTd"><span class="Beyond">主数据名称</span></th>'
                                        +'<th width="16%"><span class="Beyond">申请人姓名</span></th>'
                                        +'<th width="18%"><span class="Beyond">申请日期</span></th>'
                                        +'<th>备注</th>'
                                        +'</tr>'
                                        +'<tr class="TrInterval"><th></th></tr>'
                                        +'</thead>'
                                        +'<tbody>'
                                        for( var i = 0; i < GSPWList.ET_HEAD.item.length; i++){
                                            var NotZuNum = "";
                                            var NotAppId = "";
                                            GWaitHandleList +='<tr>'
                                                            for( var j = 0; j < GSPWList.ET_ITEM.item.length; j++ ){
                                                                if( checkNoChar(GSPWList.ET_ITEM.item[j].APPLY_ID) == checkNoChar(GSPWList.ET_HEAD.item[i].APPLY_ID) ){
                                                                    if( NotZuNum == "" ){
                                                                        NotZuNum = ''+checkNoChar(GSPWList.ET_ITEM.item[j].MAKTX)+'';
                                                                    }else{
                                                                        NotZuNum = ''+NotZuNum+'，'+checkNoChar(GSPWList.ET_ITEM.item[j].MAKTX)+'';
                                                                    }
                                                                    NotAppId = checkNoChar(GSPWList.ET_HEAD.item[i].APPLY_ID);
                                                                }
                                                            }
                                            GWaitHandleList +='<td class="center" style="width:50px;">'
                                                            +'<label class="position-relative">'
                                                            +'<input type="checkbox" name="bhgpID" value="'+bussType+','+NotAppId+','+checkNoChar(subAll[NotAppId].taskId)+','+checkNoChar(subAll[NotAppId].currStep)+'" onclick="ChkSonClick(this);" class="ace" />'
                                                            +'<span class="lbl"></span>'
                                                            +'</label>'
                                                            +'</td>'
                                                            +'<td title='+sqTYPE+' onclick="Open_Detailed(\''+bussType+'\',\''+NotAppId+'\',\''+checkNoChar(subAll[NotAppId].taskId)+'\',\''+checkNoChar(subAll[NotAppId].currStep)+'\')">'
                                                            +'<span class="Beyond">'+sqTYPE+'</span>'
                                                            +'</td>'

                                                            +'<td title='+NotZuNum+' onclick="Open_Detailed(\''+bussType+'\',\''+NotAppId+'\',\''+checkNoChar(subAll[NotAppId].taskId)+'\',\''+checkNoChar(subAll[NotAppId].currStep)+'\')">'
                                                            +'<span class="TdSpan" class="Beyond">'+NotZuNum+' </span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList.ET_HEAD.item[i].APPLY_NAME)+'  onclick="Open_Detailed(\''+bussType+'\',\''+NotAppId+'\',\''+checkNoChar(subAll[NotAppId].taskId)+'\',\''+checkNoChar(subAll[NotAppId].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList.ET_HEAD.item[i].APPLY_NAME)+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList.ET_HEAD.item[i].APPLY_DATE)+' onclick="Open_Detailed(\''+bussType+'\',\''+NotAppId+'\',\''+checkNoChar(subAll[NotAppId].taskId)+'\',\''+checkNoChar(subAll[NotAppId].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList.ET_HEAD.item[i].APPLY_DATE)+'</span>'
                                                            +'</td>'
                                                            +'<td title='+checkNoChar(GSPWList.ET_HEAD.item[i].ZMARK)+' onclick="Open_Detailed(\''+bussType+'\',\''+NotAppId+'\',\''+checkNoChar(subAll[NotAppId].taskId)+'\',\''+checkNoChar(subAll[NotAppId].currStep)+'\')">'
                                                            +'<span class="Beyond">'+checkNoChar(GSPWList.ET_HEAD.item[i].ZMARK)+'</span>'
                                                            +'</td>'
                                                            +'</tr>'
                                                            +'<tr class="TrInterval"><td></td></tr>'
                                        }
                                        +'</tbody>'
                                        +'</table>';
                        $('#WaitHandleList_'+bussType+'').html(GWaitHandleList);
                        Reizes();
                    }else{
                        // var unique_id = $.gritter.add({
                        //     title: 'GSP'+sqTYPE+'',
                        //     text: ''+GSP_W_gysvendListsJSON.ES_PUBLIC.MESSAGE+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                        //     sticky: true,
                        //     time: '',
                        //     class_name: 'gritter-info gritter-center'
                        // });
                        $('#WaitHandleList_'+bussType+'').html("");
                    }
                }
            }
            //分页页码点击事件
            function PagJump(CNum,pagesize,bussType){
                if( bussType == "G001" ){
                    var sval = $("#G001Search").val();
                }else if( bussType == "G002" ){
                    var sval = $("#G002Search").val();
                }else if( bussType == "G003" ){
                    var sval = $("#G003Search").val();
                }else if( bussType == "G007" ){
                    var sval = $("#G007Search").val();
                }
                if( sval == "查询待办事项..." ){
                    sval = "";
                }
                var opts = {            
                    lines: 10, // 花瓣数目
                    length: 0, // 花瓣长度
                    width: 10, // 花瓣宽度
                    radius: 20, // 花瓣距中心半径
                    corners: 1, // 花瓣圆滑度 (0-1)
                    rotate: 0, // 花瓣旋转角度
                    direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                    color: '#2679b5', // 花瓣颜色
                    speed: 1, // 花瓣旋转速度
                    trail: 60, // 花瓣旋转时的拖影(百分比)
                    shadow: false, // 花瓣是否显示阴影
                    hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                    className: 'spinner', // spinner css 样式名称
                    zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                    top: '-100', // spinner 相对父容器Top定位 单位 px
                    left: '0'// spinner 相对父容器Left定位 单位 px
                };
                var target = document.getElementById("Loading");  
                var spinner = new Spinner(opts).spin(target);
                pagei = $.layer({
                    type: 1,   //0-4的选择,
                    title: false,
                    border: [0],
                    closeBtn: [0],
                    shadeClose: false,
                    area: ['auto', 'auto'],
                    page: {dom : '#Loading'}
                });
                setTimeout(function() {
                    if( sval == "" ){
                        GSP_W_ID_List(CNum,pagesize,bussType);
                    }else{
                        search(CNum,pagesize,bussType,sval);
                    }
                    spinner.spin();
                    layer.close(pagei);
                }, 300 + parseInt(Math.random() * 300));
            }
            //每页显示条数
            function changePageSize(pagesize){
                var bussType = JSON.parse(localStorage["bussType"]);
                if( bussType == "G001" ){
                    var sval = $("#G001Search").val();
                }else if( bussType == "G002" ){
                    var sval = $("#G002Search").val();
                }else if( bussType == "G003" ){
                    var sval = $("#G003Search").val();
                }else if( bussType == "G007" ){
                    var sval = $("#G007Search").val();
                }
                if( sval == "查询待办事项..." ){
                    sval = "";
                }
                var opts = {            
                    lines: 10, // 花瓣数目
                    length: 0, // 花瓣长度
                    width: 10, // 花瓣宽度
                    radius: 20, // 花瓣距中心半径
                    corners: 1, // 花瓣圆滑度 (0-1)
                    rotate: 0, // 花瓣旋转角度
                    direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                    color: '#2679b5', // 花瓣颜色
                    speed: 1, // 花瓣旋转速度
                    trail: 60, // 花瓣旋转时的拖影(百分比)
                    shadow: false, // 花瓣是否显示阴影
                    hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                    className: 'spinner', // spinner css 样式名称
                    zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                    top: '-100', // spinner 相对父容器Top定位 单位 px
                    left: '0'// spinner 相对父容器Left定位 单位 px
                };
                var target = document.getElementById("Loading");  
                var spinner = new Spinner(opts).spin(target);
                pagei = $.layer({
                    type: 1,   //0-4的选择,
                    title: false,
                    border: [0],
                    closeBtn: [0],
                    shadeClose: false,
                    area: ['auto', 'auto'],
                    page: {dom : '#Loading'}
                });
                setTimeout(function() {
                    if( sval == "" ){
                        GSP_W_ID_List(1,pagesize,bussType);
                    }else{
                        search(1,pagesize,bussType,sval);
                    }
                spinner.spin();
                    layer.close(pagei);
                }, 300 + parseInt(Math.random() * 300));
            }
            //回车搜索功能
            function toSearch(sval){
                if(event.keyCode==13){
                    var opts = {            
                        lines: 10, // 花瓣数目
                        length: 0, // 花瓣长度
                        width: 10, // 花瓣宽度
                        radius: 20, // 花瓣距中心半径
                        corners: 1, // 花瓣圆滑度 (0-1)
                        rotate: 0, // 花瓣旋转角度
                        direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                        color: '#2679b5', // 花瓣颜色
                        speed: 1, // 花瓣旋转速度
                        trail: 60, // 花瓣旋转时的拖影(百分比)
                        shadow: false, // 花瓣是否显示阴影
                        hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                        className: 'spinner', // spinner css 样式名称
                        zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                        top: '-100', // spinner 相对父容器Top定位 单位 px
                        left: '0'// spinner 相对父容器Left定位 单位 px
                    };
                    var target = document.getElementById("Loading");  
                    var spinner = new Spinner(opts).spin(target);
                    pagei = $.layer({
                        type: 1,   //0-4的选择,
                        title: false,
                        border: [0],
                        closeBtn: [0],
                        shadeClose: false,
                        area: ['auto', 'auto'],
                        page: {dom : '#Loading'}
                    });
                    setTimeout(function() {
                        if( $("#titleH1").text() == "首营企业待办" ){
                            var bussType = 'G001';
                        }else if( $("#titleH1").text() == "首营客户待办" ){
                            var bussType = 'G003';
                        }else if( $("#titleH1").text() == "首营品种待办" ){
                            var bussType = 'G002';
                        }else if( $("#titleH1").text() == "不合格品待办" ){
                            var bussType = 'G007';
                        }
                        search(1,10,bussType,sval);
                        spinner.spin();
                        layer.close(pagei);
                    }, 300 + parseInt(Math.random() * 300));
                }else{
                    return;
                }
            }
            function search(CNum,pagesize,bussType,sval){
                var STATUS = '2';//审批状态(1是完成，2是未完成，空或0是全部)
                //var bussType = JSON.parse(localStorage["bussType"]);
                var bussnoArr = [];//保存待办列表的所有id
                var subAll = {};
                if( bussType == 'G001' ){
                    var GSP_W_ListsJSON = GSPsubmit_WSearch_G001(CNum,pagesize,sval,STATUS);
                    if(GSP_W_ListsJSON.status == '0'){
                        var waitTaskList = GSP_W_ListsJSON.ET_ZGSPWF001.item;
                        if( waitTaskList.length == undefined ){
                            bussnoArr.push({
                                "APPID":waitTaskList.APPLY_ID
                            });
                            subAll[waitTaskList.APPLY_ID] = waitTaskList;
                        }else{
                            for(var i = 0; i < waitTaskList.length; i++){
                                bussnoArr.push({
                                    "APPID":waitTaskList[i].APPLY_ID
                                });
                                subAll[waitTaskList[i].APPLY_ID] = waitTaskList[i];
                            }
                        }
                        var AllPage = GSP_W_ListsJSON.ES_PUBLIC.TOTALSIZE;
                        // var pageAll = parseInt(total)%parseInt(pageSize) == 0? parseInt(total)/parseInt(pageSize):(parseInt(total/pageSize)+1);
                        var PageNum = parseInt(AllPage)%parseInt(pagesize) == 0? parseInt(AllPage)/parseInt(pagesize):(parseInt(AllPage/pagesize)+1);
                        $("#CNum").html(CNum);
                        $("#AllPage").html(PageNum);
                        if( CNum == '1' ){
                            if( CNum == PageNum ){
                                $("#FirstPage").addClass("disabled");
                                $("#PrevPage").addClass("disabled");
                                $("#NextPage").addClass("disabled");
                                $("#LastPage").addClass("disabled");
                            }else{
                                $("#FirstPage").addClass("disabled");
                                $("#PrevPage").addClass("disabled");
                                $("#NextPage").removeClass("disabled");
                                $("#LastPage").removeClass("disabled");
                            }
                        }else{
                            if( CNum == PageNum ){
                                $("#FirstPage").removeClass("disabled");
                                $("#PrevPage").removeClass("disabled");
                                $("#NextPage").addClass("disabled");
                                $("#LastPage").addClass("disabled");
                            }else{
                                $("#FirstPage").removeClass("disabled");
                                $("#PrevPage").removeClass("disabled");
                                $("#NextPage").removeClass("disabled");
                                $("#LastPage").removeClass("disabled");
                            }
                        }
                        var FirstPageNum = 1;
                        var PrevPage = parseInt(CNum) - 1;
                        var NextPageNum = parseInt(CNum) + 1;
                        var LastPage = parseInt(PageNum);
                        $("#FirstPage a").attr('onclick','PagJump(\''+FirstPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#PrevPage a").attr('onclick','PagJump(\''+PrevPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#NextPage a").attr('onclick','PagJump(\''+NextPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#LastPage a").attr('onclick','PagJump(\''+LastPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                        
                        $("#page").children("li").each(function(){
                            if( $(this).hasClass("disabled") ){
                                $(this).children("a").attr('onclick','');
                            }
                        })
                        GSP_W_line_List(bussType,bussnoArr,subAll);
                    }else{
                        if( bussType == 'G001' ){
                            sqTYPE = "首营企业待办"
                        }else if( bussType == 'G002' ){
                            sqTYPE = "首营品种待办"
                        }else if( bussType == 'G003' ){
                            sqTYPE = "首营客户待办"
                        }else if( bussType == 'G007' ){
                            sqTYPE = "不合格品待办"
                        }
                        var unique_id = $.gritter.add({
                            title: 'GSP'+sqTYPE+'搜索错误',
                            text: ''+GSP_W_ListsJSON.ES_PUBLIC.MESSAGE+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                            sticky: true,
                            time: '',
                            class_name: 'gritter-info gritter-center'
                        });
                    }
                }else if( bussType == 'G002' ){
                    var GSP_W_ListsJSON = GSPsubmit_WSearch_G002(CNum,pagesize,sval,STATUS);
                    if(GSP_W_ListsJSON.status == '0'){
                        var waitTaskList = GSP_W_ListsJSON.ET_ZGSPWF003.item;
                        if( waitTaskList.length == undefined ){
                            bussnoArr.push({
                                "APPID":waitTaskList.APPLY_ID
                            });
                            subAll[waitTaskList.APPLY_ID] = waitTaskList;
                        }else{
                            for(var i = 0; i < waitTaskList.length; i++){
                                bussnoArr.push({
                                    "APPID":waitTaskList[i].APPLY_ID
                                });
                                subAll[waitTaskList[i].APPLY_ID] = waitTaskList[i];
                            }
                        }
                        var AllPage = GSP_W_ListsJSON.ES_PUBLIC.TOTALSIZE;
                        // var pageAll = parseInt(total)%parseInt(pageSize) == 0? parseInt(total)/parseInt(pageSize):(parseInt(total/pageSize)+1);
                        var PageNum = parseInt(AllPage)%parseInt(pagesize) == 0? parseInt(AllPage)/parseInt(pagesize):(parseInt(AllPage/pagesize)+1);
                        $("#CNum").html(CNum);
                        $("#AllPage").html(PageNum);
                        if( CNum == '1' ){
                            if( CNum == PageNum ){
                                $("#FirstPage").addClass("disabled");
                                $("#PrevPage").addClass("disabled");
                                $("#NextPage").addClass("disabled");
                                $("#LastPage").addClass("disabled");
                            }else{
                                $("#FirstPage").addClass("disabled");
                                $("#PrevPage").addClass("disabled");
                                $("#NextPage").removeClass("disabled");
                                $("#LastPage").removeClass("disabled");
                            }
                        }else{
                            if( CNum == PageNum ){
                                $("#FirstPage").removeClass("disabled");
                                $("#PrevPage").removeClass("disabled");
                                $("#NextPage").addClass("disabled");
                                $("#LastPage").addClass("disabled");
                            }else{
                                $("#FirstPage").removeClass("disabled");
                                $("#PrevPage").removeClass("disabled");
                                $("#NextPage").removeClass("disabled");
                                $("#LastPage").removeClass("disabled");
                            }
                        }
                        var FirstPageNum = 1;
                        var PrevPage = parseInt(CNum) - 1;
                        var NextPageNum = parseInt(CNum) + 1;
                        var LastPage = parseInt(PageNum);
                        $("#FirstPage a").attr('onclick','PagJump(\''+FirstPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#PrevPage a").attr('onclick','PagJump(\''+PrevPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#NextPage a").attr('onclick','PagJump(\''+NextPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#LastPage a").attr('onclick','PagJump(\''+LastPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                        
                        $("#page").children("li").each(function(){
                            if( $(this).hasClass("disabled") ){
                                $(this).children("a").attr('onclick','');
                            }
                        })
                        GSP_W_line_List(bussType,bussnoArr,subAll);
                    }else{
                        if( bussType == 'G001' ){
                            sqTYPE = "首营企业待办"
                        }else if( bussType == 'G002' ){
                            sqTYPE = "首营品种待办"
                        }else if( bussType == 'G003' ){
                            sqTYPE = "首营客户待办"
                        }else if( bussType == 'G007' ){
                            sqTYPE = "不合格品待办"
                        }
                        var unique_id = $.gritter.add({
                            title: 'GSP'+sqTYPE+'搜索错误',
                            text: ''+GSP_W_ListsJSON.ES_PUBLIC.MESSAGE+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                            sticky: true,
                            time: '',
                            class_name: 'gritter-info gritter-center'
                        });
                    }
                }else if( bussType == 'G003' ){
                    var GSP_W_ListsJSON = GSPsubmit_WSearch_G003(CNum,pagesize,sval,STATUS);
                    if(GSP_W_ListsJSON.status == '0'){
                        var waitTaskList = GSP_W_ListsJSON.ET_ZGSPWF004.item;
                        if( waitTaskList.length == undefined ){
                            bussnoArr.push({
                                "APPID":waitTaskList.APPLY_ID
                            });
                            subAll[waitTaskList.APPLY_ID] = waitTaskList;
                        }else{
                            for(var i = 0; i < waitTaskList.length; i++){
                                bussnoArr.push({
                                    "APPID":waitTaskList[i].APPLY_ID
                                });
                                subAll[waitTaskList[i].APPLY_ID] = waitTaskList[i];
                            }
                        }
                        var AllPage = GSP_W_ListsJSON.ES_PUBLIC.TOTALSIZE;
                        // var pageAll = parseInt(total)%parseInt(pageSize) == 0? parseInt(total)/parseInt(pageSize):(parseInt(total/pageSize)+1);
                        var PageNum = parseInt(AllPage)%parseInt(pagesize) == 0? parseInt(AllPage)/parseInt(pagesize):(parseInt(AllPage/pagesize)+1);
                        $("#CNum").html(CNum);
                        $("#AllPage").html(PageNum);
                        if( CNum == '1' ){
                            if( CNum == PageNum ){
                                $("#FirstPage").addClass("disabled");
                                $("#PrevPage").addClass("disabled");
                                $("#NextPage").addClass("disabled");
                                $("#LastPage").addClass("disabled");
                            }else{
                                $("#FirstPage").addClass("disabled");
                                $("#PrevPage").addClass("disabled");
                                $("#NextPage").removeClass("disabled");
                                $("#LastPage").removeClass("disabled");
                            }
                        }else{
                            if( CNum == PageNum ){
                                $("#FirstPage").removeClass("disabled");
                                $("#PrevPage").removeClass("disabled");
                                $("#NextPage").addClass("disabled");
                                $("#LastPage").addClass("disabled");
                            }else{
                                $("#FirstPage").removeClass("disabled");
                                $("#PrevPage").removeClass("disabled");
                                $("#NextPage").removeClass("disabled");
                                $("#LastPage").removeClass("disabled");
                            }
                        }
                        var FirstPageNum = 1;
                        var PrevPage = parseInt(CNum) - 1;
                        var NextPageNum = parseInt(CNum) + 1;
                        var LastPage = parseInt(PageNum);
                        $("#FirstPage a").attr('onclick','PagJump(\''+FirstPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#PrevPage a").attr('onclick','PagJump(\''+PrevPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#NextPage a").attr('onclick','PagJump(\''+NextPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#LastPage a").attr('onclick','PagJump(\''+LastPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                        
                        $("#page").children("li").each(function(){
                            if( $(this).hasClass("disabled") ){
                                $(this).children("a").attr('onclick','');
                            }
                        })
                        GSP_W_line_List(bussType,bussnoArr,subAll);
                    }else{
                        if( bussType == 'G001' ){
                            sqTYPE = "首营企业待办"
                        }else if( bussType == 'G002' ){
                            sqTYPE = "首营品种待办"
                        }else if( bussType == 'G003' ){
                            sqTYPE = "首营客户待办"
                        }else if( bussType == 'G007' ){
                            sqTYPE = "不合格品待办"
                        }
                        var unique_id = $.gritter.add({
                            title: 'GSP'+sqTYPE+'搜索错误',
                            text: ''+GSP_W_ListsJSON.ES_PUBLIC.MESSAGE+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                            sticky: true,
                            time: '',
                            class_name: 'gritter-info gritter-center'
                        });
                    }
                }else if( bussType == 'G007' ){
                    var GSP_W_ListsJSON = GSPsubmit_WSearch_G007(CNum,pagesize,sval,STATUS);
                    if(GSP_W_ListsJSON.status == '0'){
                        var waitTaskList = GSP_W_ListsJSON.ET_HEAD.item;
                        if( waitTaskList.length == undefined ){
                            bussnoArr.push({
                                "APPID":waitTaskList.APPLY_ID
                            });
                            subAll[waitTaskList.APPLY_ID] = waitTaskList;
                        }else{
                            for(var i = 0; i < waitTaskList.length; i++){
                                bussnoArr.push({
                                    "APPID":waitTaskList[i].APPLY_ID
                                });
                                subAll[waitTaskList[i].APPLY_ID] = waitTaskList[i];
                            }
                        }
                        var AllPage = GSP_W_ListsJSON.ES_PUBLIC.TOTALSIZE;
                        // var pageAll = parseInt(total)%parseInt(pageSize) == 0? parseInt(total)/parseInt(pageSize):(parseInt(total/pageSize)+1);
                        var PageNum = parseInt(AllPage)%parseInt(pagesize) == 0? parseInt(AllPage)/parseInt(pagesize):(parseInt(AllPage/pagesize)+1);
                        $("#CNum").html(CNum);
                        $("#AllPage").html(PageNum);
                        if( CNum == '1' ){
                            if( CNum == PageNum ){
                                $("#FirstPage").addClass("disabled");
                                $("#PrevPage").addClass("disabled");
                                $("#NextPage").addClass("disabled");
                                $("#LastPage").addClass("disabled");
                            }else{
                                $("#FirstPage").addClass("disabled");
                                $("#PrevPage").addClass("disabled");
                                $("#NextPage").removeClass("disabled");
                                $("#LastPage").removeClass("disabled");
                            }
                        }else{
                            if( CNum == PageNum ){
                                $("#FirstPage").removeClass("disabled");
                                $("#PrevPage").removeClass("disabled");
                                $("#NextPage").addClass("disabled");
                                $("#LastPage").addClass("disabled");
                            }else{
                                $("#FirstPage").removeClass("disabled");
                                $("#PrevPage").removeClass("disabled");
                                $("#NextPage").removeClass("disabled");
                                $("#LastPage").removeClass("disabled");
                            }
                        }
                        var FirstPageNum = 1;
                        var PrevPage = parseInt(CNum) - 1;
                        var NextPageNum = parseInt(CNum) + 1;
                        var LastPage = parseInt(PageNum);
                        $("#FirstPage a").attr('onclick','PagJump(\''+FirstPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#PrevPage a").attr('onclick','PagJump(\''+PrevPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#NextPage a").attr('onclick','PagJump(\''+NextPageNum+'\',\''+pagesize+'\',\''+bussType+'\')');
                        $("#LastPage a").attr('onclick','PagJump(\''+LastPage+'\',\''+pagesize+'\',\''+bussType+'\')');
                        
                        $("#page").children("li").each(function(){
                            if( $(this).hasClass("disabled") ){
                                $(this).children("a").attr('onclick','');
                            }
                        })
                        GSP_W_line_List(bussType,bussnoArr,subAll);
                    }else{
                        if( bussType == 'G001' ){
                            sqTYPE = "首营企业待办"
                        }else if( bussType == 'G002' ){
                            sqTYPE = "首营品种待办"
                        }else if( bussType == 'G003' ){
                            sqTYPE = "首营客户待办"
                        }else if( bussType == 'G007' ){
                            sqTYPE = "不合格品待办"
                        }
                        var unique_id = $.gritter.add({
                            title: 'GSP'+sqTYPE+'搜索错误',
                            text: ''+GSP_W_ListsJSON.ES_PUBLIC.MESSAGE+'<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter_two(this);"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                            sticky: true,
                            time: '',
                            class_name: 'gritter-info gritter-center'
                        });
                    }
                }
                //console.log(GSP_W_gysvendListsJSON);
            }
            //展开详情页
            function Open_Detailed(bussType,APPID,taskId,currStep){
                var GSPWList = JSON.parse(localStorage["GSPWList"]);
                if (bussType == 'G007') { // 不合格品已办单条详细详细
                    for (var j = 0; j < GSPWList.ET_HEAD.item.length; j++) {
                        if (GSPWList.ET_HEAD.item[j].APPLY_ID == APPID) {
                            //缓存选中ID
                            localStorage.removeItem("GSPWListID");
                            localStorage.GSPWListID = JSON.stringify(APPID);
                            $.layer({
                                type: 2,
                                border: [0],
                                title: false,
                                shadeClose: true,
                                closeBtn: false,
                                shade: [0.6, '#000'],
                                offset: ['26px',''],
                                area: ['1000px',($(window).height() - 52) +'px'],
                                iframe: { src: './WDetails_Drugs.html' }
                            });
                        };
                    };
                }else{
                    for (var i = 0; i < GSPWList.length; i++ ){ 
                        if (GSPWList[i].APPLY_ID == APPID) { //判断是否为选中列
                            //缓存选中ID
                            localStorage.removeItem("GSPWListID");
                            localStorage.GSPWListID = JSON.stringify(i);
                            //判断标签页弹出相应弹出框
                            if( bussType == 'G001' ){ // 首营企业待办单条详细详细
                                Open_DetailedUrl='./WDetails_Enterprise.html';
                            }else if( bussType == 'G002' ){ // 首营品种待办单条详细详细
                                Open_DetailedUrl='./WDetails_Varieties.html';
                            }else if( bussType == 'G003' ){ // 首营客户待办单条详细详细
                                Open_DetailedUrl='./WDetails_Customer.html';
                            }
                            $.layer({
                                type: 2,
                                border: [0],
                                title: false,
                                shadeClose: true,
                                closeBtn: false,
                                shade: [0.6, '#000'],
                                offset: ['26px',''],
                                area: ['1000px',($(window).height() - 52) +'px'],
                                iframe: { src: Open_DetailedUrl }
                            });
                        };
                    }
                }
                localStorage.removeItem("APPID");
                localStorage.APPID = JSON.stringify(APPID);
                localStorage.removeItem("taskId");
                localStorage.taskId = JSON.stringify(taskId);
                localStorage.removeItem("currStep");
                localStorage.currStep = JSON.stringify(currStep);
            }
            //以下是提交选中的
            function submitAll(type){
                var opts = {            
                    lines: 10, // 花瓣数目
                    length: 0, // 花瓣长度
                    width: 10, // 花瓣宽度
                    radius: 20, // 花瓣距中心半径
                    corners: 1, // 花瓣圆滑度 (0-1)
                    rotate: 0, // 花瓣旋转角度
                    direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                    color: '#2679b5', // 花瓣颜色
                    speed: 1, // 花瓣旋转速度
                    trail: 60, // 花瓣旋转时的拖影(百分比)
                    shadow: false, // 花瓣是否显示阴影
                    hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                    className: 'spinner', // spinner css 样式名称
                    zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                    top: '-100', // spinner 相对父容器Top定位 单位 px
                    left: '0'// spinner 相对父容器Left定位 单位 px
                };
                var target = document.getElementById("Loading");  
                var spinner = new Spinner(opts).spin(target);
                pagei = $.layer({
                    type: 1,   //0-4的选择,
                    title: false,
                    border: [0],
                    closeBtn: [0],
                    shadeClose: false,
                    area: ['auto', 'auto'],
                    page: {dom : '#Loading'}
                });
                setTimeout(function() {
                    var chk_value =[];
                    $('#WaitHandleList_'+type+'').find('input[name="bhgpID"]:checked').each(function(){
                        chk_value.push({
                            'value':$(this).val()
                        }); 
                    });
                　　$.each(chk_value, function(i, item){
                        var item = item.value.split(",");
                        var pener = localStorage.pernrBase?localStorage.pernrBase:'';//登录人工号
                        var bussType = item[0];
                        var appType = 'AG';
                        var APPID = item[1];
                        var taskId = item[2];
                        var currStep = item[3];
                        var opinion = '同意'
                        var WSubmitListsData = GSPsubmit_WSubmit(pener,bussType,appType,APPID,taskId,currStep,opinion);
                        if(WSubmitListsData.status == '0'){
                            if( chk_value.length == i+1 ){
                                $.gritter.add({
                                    title: '成功操作提示信息',
                                    text: '操作成功',
                                    class_name: 'gritter-success'
                                });
                                setTimeout(function(){
                                    //window.location.reload();
                                    AllNavTabs(bussType);
                                },1500);
                                spinner.spin();
                                layer.close(pagei);
                            }
                        }else{
                            $.gritter.add({
                                title: '错误信息提示',
                                text: WSubmitListsData.errMsg,
                                class_name: 'gritter-error'
                            });
                            spinner.spin();
                            layer.close(pagei);
                            return false;
                        }
                　　});
                }, 300 + parseInt(Math.random() * 300));
            }
            // 主数据名称溢出部分成...
            function Reizes () {
                if (document.getElementById("TbTd") != undefined || document.getElementById("TbTd") != null) {
                    var w = $(window).width();
                    var CountSpan = $(".TdSpan");
                    for (var i = 0; i < CountSpan.length; i++) {
                        CountSpan.eq(i).css({"width":w*0.28});
                        CountSpan.eq(i).addClass("overflowspan");
                    };
                };
            }
            //初始化
            jQuery(function($) {
                //登录工号获取
                var localCookie = document.cookie;
                var cookie_user = '';
                if(localCookie.length > 0 && localCookie.indexOf('userid')>-1){
                    localCookie = localCookie.split(';');
                    for(var lc in localCookie){
                        if(localCookie[lc].indexOf('userid=')>-1){
                            cookie_user = localCookie[lc];
                            break;
                        }
                    } 
                    if(cookie_user == ''){
                        var unique_id = $.gritter.add({
                            title: '系统登录错误提示',
                            text: '无法获取信息，请重新登录<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter(this);WindowClose();"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                            sticky: true,
                            time: '',
                            class_name: 'gritter-info gritter-center'
                        });
                    }else{
                        cookie_user = trim(cookie_user).substring(7);
                        localStorage.removeItem('pernrBase');
                        localStorage.setItem('pernrBase',cookie_user);
                    }
                }else{
                    var unique_id = $.gritter.add({
                        title: '系统登录错误提示',
                        text: '无法获取信息，请重新登录<p style="padding-top:14px;"><span class="col-sm-6"></span><span class="col-sm-6" style="text-align:right;"><button class="btn btn-xs btn-success" onclick="CloseGritter(this);WindowClose();"><i class="ace-icon fa fa-check"></i>确定</button></span></p>',
                        sticky: true,
                        time: '',
                        class_name: 'gritter-info gritter-center'
                    });
                }
                //页面初始化
                $.ajaxSetup({
                    contentType: 'application/json',
                    async:false,
                    error:function(){
                        alert(errMsg1);
                    },
                    timeout:timeout
                });

                var opts = {            
                    lines: 10, // 花瓣数目
                    length: 0, // 花瓣长度
                    width: 10, // 花瓣宽度
                    radius: 20, // 花瓣距中心半径
                    corners: 1, // 花瓣圆滑度 (0-1)
                    rotate: 0, // 花瓣旋转角度
                    direction: 1, // 花瓣旋转方向 1: 顺时针, -1: 逆时针
                    color: '#2679b5', // 花瓣颜色
                    speed: 1, // 花瓣旋转速度
                    trail: 60, // 花瓣旋转时的拖影(百分比)
                    shadow: false, // 花瓣是否显示阴影
                    hwaccel: false, //spinner 是否启用硬件加速及高速旋转            
                    className: 'spinner', // spinner css 样式名称
                    zIndex: 2e9, // spinner的z轴 (默认是2000000000)
                    top: '-100', // spinner 相对父容器Top定位 单位 px
                    left: '0'// spinner 相对父容器Left定位 单位 px
                };
                var target = document.getElementById("Loading");  
                var spinner = new Spinner(opts).spin(target);
                pagei = $.layer({
                    type: 1,   //0-4的选择,
                    title: false,
                    border: [0],
                    closeBtn: [0],
                    shadeClose: false,
                    area: ['auto', 'auto'],
                    page: {dom : '#Loading'}
                });
                setTimeout(function() {
                    // W GSP待办
                    // A GSP已办
                    //默认GSP文档类型G001(首营企业)
                    var bussType = 'G001';
                    localStorage.removeItem("bussType");
                    localStorage.bussType = JSON.stringify(bussType);
                    //获取GSP待审批ID列表-GSP_W_List()
                    GSP_W_ID_List(1,10,bussType);
                spinner.spin();
                    layer.close(pagei);
                }, 300 + parseInt(Math.random() * 300));
            });
        </script>
        <link rel="stylesheet" href="../assets/css/ace.onpage-help.css" />
        <link rel="stylesheet" href="../docs/assets/js/themes/sunburst.css" />
        <script type="text/javascript">ace.vars['base'] = '..';</script>
        <script src="../assets/js/ace/ace.onpage-help.js"></script>
        <script src="../docs/assets/js/rainbow.js"></script>
        <script src="../docs/assets/js/language/generic.js"></script>
        <script src="../docs/assets/js/language/html.js"></script>
        <script src="../docs/assets/js/language/css.js"></script>
        <script src="../docs/assets/js/language/javascript.js"></script>
        <script src="../layer/layer.min.js"></script>
        <script src="../myjs/backupNew.js"></script>
        <script src="../myjs/gys.js"></script>
        <script src="../myjs/lexus.js"></script>
        <script src="../assets/js/jquery.gritter.min.js"></script>
        <script src="../myjs/GSP.js"></script>
        <script src="../assets/js/fuelux/fuelux.spinner.min.js"></script>
        <script src="../assets/js/spin.min.js"></script>
    </body>
</html>