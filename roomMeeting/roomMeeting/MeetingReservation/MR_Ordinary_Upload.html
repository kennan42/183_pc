<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta charset="utf-8"/>
  <title>管理员需要预订</title>
  <meta name="description" content="Common Buttons &amp; Icons"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
  <!-- bootstrap & fontawesome -->
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="../assets/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="../assets/css/bootstrap-timepicker.css"/>
  <!-- page specific plugin styles -->
  <!-- text fonts -->
  <link rel="stylesheet" href="../assets/css/ace-fonts.css"/>
  <!-- ace styles -->
  <link rel="stylesheet" href="../assets/css/ace.min.css"/>
  <!--[if lte IE 9]>
  <link rel="stylesheet" href="../assets/css/ace-part2.min.css"/>
  <![endif]-->
  <link rel="stylesheet" href="../assets/css/ace-skins.min.css"/>
  <link rel="stylesheet" href="../assets/css/ace-rtl.min.css"/>
  <!--[if lte IE 9]>
  <link rel="stylesheet" href="../assets/css/ace-ie.min.css"/>
  <![endif]-->
  <!-- inline styles related to this page -->
  <!-- ace settings handler -->
  <script src="../assets/js/ace-extra.min.js"></script>
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

  <!--[if lte IE 8]>
  <script src="../assets/js/html5shiv.js"></script>
  <script src="../assets/js/respond.min.js"></script>
  <![endif]-->
  <script src='../assets/js/jquery.min.js'></script>
  <script src="../layer/layer.min.js"></script>

  <script src="../myjs/backupNew.js"></script>
  <script src="../myjs/lexus.js"></script>
  <script src="../myjs/jquery.form.js"></script>

  <!-- ace settings handler -->
  <script src="../assets/js/ace-extra.min.js"></script>
  <script src="../assets/js/bootstrap-tag.min.js"></script>

  <!-- 加载自定义样式 -->
  <link rel="stylesheet" href="css/custom.css">
  <style type="text/css">
    .tooltip-info + .tooltip.bottom .tooltip-arrow, .tooltip.tooltip-info.bottom .tooltip-arrow {
      border-bottom-color: #428bca;
    }

    .tooltip-info + .tooltip > .tooltip-inner, .tooltip.tooltip-info > .tooltip-inner {
      background-color: #428bca;
      border-radius: 4px;
    }

    .hr-solid {
      height: 1px;
      border-top: 1px solid #d5e3ef;
      border-bottom: none;
    }

    .text-onclick {
      color: #ed7735;
    }

    .control-label {
      color: #667E99;
    }

    input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"] {
      border-radius: 0 !important;
      color: #858585;
      background-color: #fff;
      border: 1px solid #8aafce;
      padding: 5px 4px 6px;
      font-size: 14px;
      font-family: inherit;
      -webkit-box-shadow: none !important;
      box-shadow: none !important;
      -webkit-transition-duration: .1s;
      transition-duration: .1s;
    }

    .form-control, select {
      border-radius: 0;
      -webkit-box-shadow: none !important;
      box-shadow: none !important;
      color: #858585;
      background-color: #fff;
      border: 1px solid #8aafce;
    }
  </style>
</head>
<body class="no-skin">
<!-- /section:basics/navbar.layout -->
<!-- /section:basics/navbar.layout -->
<div class="main-container" id="main-container">
  <script type="text/javascript">
    try {
      ace.settings.check('main-container', 'fixed')
    } catch (e) {
    }
  </script>
  <div class="breadcrumbs" id="breadcrumbs">
    <script type="text/javascript">
      try {
        ace.settings.check('breadcrumbs', 'fixed')
      } catch (e) {
      }
    </script>
    <ul class="breadcrumb">
      <li>
        <i class="ace-icon fa fa-home home-icon">
        </i>
        <a href="#">
          席位卡上传
        </a>
      </li>
    </ul>
    <!-- /.breadcrumb -->
    <button class="btn border-none" style="float:right;" onClick="closeLay(false)">
      <i class="glyphicon glyphicon-remove align-top">
      </i>
    </button>
  </div>
  <!-- /section:basics/content.breadcrumbs -->
  <div class="page-content">
    <div class="row">
      <div class="col-xs-12">
        <div class="col-xs-12">
          <div class="tab-content">
            <form class="form-horizontal" role="form" id="uploadForm" enctype="multipart/form-data">
              <div class="form-group">
                <label class="col-sm-2 control-label no-padding-right" for="form-field-sername"> 席位卡文件 </label>

                <div class="col-sm-10">
                  <label class="ace-file-input width-90 inline">
                    <input type="file" name="file" id="upload">
                  </label>
                </div>

              </div>
              <div class="clearfix form-actions" style="background-color:#fff;border-top:1px solid #d5e3ef;">
                <div class="col-sm-12">
                  <div class="col-sm-6">
                    <button class="btn btn-warning" style="width:50%;float: right;" type="button" onclick="closeLay(false);">
                      <i class="ace-icon fa fa-undo bigger-110"></i>
                      取消
                    </button>
                  </div>
                  <div class="col-sm-6">
                    <button class="btn btn-info" style="width:50%;" type="button" onclick="uploadFile();">
                      <i class="ace-icon fa fa-check bigger-110"></i>
                      上传
                    </button>
                  </div>
                </div>
              </div>
            </form>
            <input type="hidden" id="upload-status" value="false">
          </div>
        </div>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
  </div>
  <!-- /.page-content -->
</div>
<!-- /.main-container -->
<!-- basic scripts -->
<!--[if !IE]> -->
<script type="text/javascript">
  window.jQuery || document.write("<script src='../assets/js/jquery.min.js'>" + "<" + "/script>");
</script>

<!-- <![endif]-->
<!--[if IE]>
<script type="text/javascript">
  window.jQuery || document.write("<script src='../assets/js/jquery1x.min.js'>" + "<" + "/script>");
</script>
<![endif]-->
<script type="text/javascript">
  if ('ontouchstart' in document.documentElement) document.write("<script src='../assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>
<script src="../assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->
<!--[if lte IE 8]>
<script src="../assets/js/excanvas.min.js"></script>
<![endif]-->
<script src="../assets/js/jquery-ui.custom.min.js"></script>
<script src="../assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="../assets/js/chosen.jquery.min.js"></script>
<script src="../assets/js/fuelux/fuelux.spinner.min.js"></script>
<script src="../assets/js/date-time/bootstrap-datepicker.min.js"></script>
<script src="../assets/js/date-time/bootstrap-timepicker.min.js"></script>
<script src="../assets/js/date-time/moment.min.js"></script>
<script src="../assets/js/date-time/daterangepicker.min.js"></script>
<script src="../assets/js/date-time/bootstrap-datetimepicker.min.js"></script>
<script src="../assets/js/bootstrap-colorpicker.min.js"></script>
<script src="../assets/js/jquery.knob.min.js"></script>
<script src="../assets/js/jquery.autosize.min.js"></script>
<script src="../assets/js/jquery.inputlimiter.1.3.1.min.js"></script>
<script src="../assets/js/jquery.maskedinput.min.js"></script>
<script src="../assets/js/bootstrap-tag.min.js"></script>
<!--<script src="../assets/js/typeahead.jquery.min.js"></script>--><!-- 缺少 -->
<script src="../assets/js/dropzone.min.js"></script>
<!-- ace scripts -->
<script src="../assets/js/ace-elements.min.js"></script>
<script src="../assets/js/ace.min.js"></script>

<script src="../assets/js/bootbox.min.js"></script>
<script src="../assets/js/jquery.easypiechart.min.js"></script>
<script src="../assets/js/jquery.gritter.min.js"></script>

<!-- inline scripts related to this page -->
<script type="text/javascript">
  jQuery(function ($) {
    //页面初始化
    $('[data-rel=tooltip]').tooltip();
    $('[data-rel=popover]').popover({html: true});
    $(".PortraitHead").each(function (i) {
      $(this).hover(function () {
        $(this).children(".PortraitHead_Admin").addClass("PortraitHead_AdminHover");
      }, function () {
        $(this).children(".PortraitHead_Admin").removeClass("PortraitHead_AdminHover");
      })
    });

    $("#upload").ace_file_input({
      no_file:'请选择 ...',
      btn_choose:'选择',
      btn_change:'修改'
    });


  });

  //关闭弹出层
  function closeLay(status) {
    if(!status) {
      parent.$("#3006").prop("checked",!parent.$("#3006").prop("checked"));
    }
    var index = parent.layer.getFrameIndex(window.name);
    parent.layer.close(index);
  }
  function uploadFile() {
    var options = {
      url: '/meet/uploadFujian',
      data: {
        file: $("#upload").val()
      },
      dataType: "json",
      contentType: "charset=UTF-8",
      timeout: 100000,
      beforeSubmit: function () {
        $('body,html').animate({ scrollTop: 0 }, 10);
        if($("#upload").val() != '') {
          aa = layer.load('上传中...',1);
        }

      },
      success: function (result) {
        if (result.status == 0) {
          if (undefined != aa) {
            layer.close(aa);
          }
          aa = layer.msg(result.msg,1,-1);
          parent.$("#3006").prop("checked", "true");
          parent.$("#seatCard").val(result.seatCard);

          setTimeout("closeLay(true)",1100);
        }
      },
      error: function (result) {
        if (undefined != aa) {
          layer.close(aa);
        }
        // 在使用非IE浏览器上传席位卡的时候给用户提示
        if(typeof result.msg == "undefined") {
          result.msg = "请使用IE浏览器上传席位卡！";
        }
        aa = layer.msg(result.msg, 2, -1);
        parent.$("#seatCard").val("");
      }
    };
    $("#uploadForm").ajaxSubmit(options);
    return !1;
  }
</script>

<link rel="stylesheet" href="../assets/css/ace.onpage-help.css"/>
<link rel="stylesheet" href="../docs/assets/js/themes/sunburst.css"/>

<script type="text/javascript"> ace.vars['base'] = '..'; </script>
<script src="../assets/js/ace/ace.onpage-help.js"></script>
<script src="../docs/assets/js/rainbow.js"></script>
<script src="../docs/assets/js/language/generic.js"></script>
<script src="../docs/assets/js/language/html.js"></script>
<script src="../docs/assets/js/language/css.js"></script>
<script src="../docs/assets/js/language/javascript.js"></script>
</body>
</html>
